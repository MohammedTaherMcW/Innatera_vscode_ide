{"version":3,"file":"extension.js","mappings":"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","sources":["webpack://platformio-ide/external commonjs2 \"vscode\"","webpack://platformio-ide/webpack/bootstrap","webpack://platformio-ide/webpack/runtime/compat get default export","webpack://platformio-ide/webpack/runtime/define property getters","webpack://platformio-ide/webpack/runtime/hasOwnProperty shorthand","webpack://platformio-ide/webpack/runtime/make namespace object","webpack://platformio-ide/./src/constants.js","webpack://platformio-ide/external commonjs2 \"Innatera-node-helpers\"","webpack://platformio-ide/external commonjs2 \"platformio-vscode-debug\"","webpack://platformio-ide/external node-commonjs \"os\"","webpack://platformio-ide/./src/utils.js","webpack://platformio-ide/external node-commonjs \"fs\"","webpack://platformio-ide/external node-commonjs \"path\"","webpack://platformio-ide/./src/project/helpers.js","webpack://platformio-ide/./src/home.js","webpack://platformio-ide/external commonjs2 \"fs-plus\"","webpack://platformio-ide/./src/installer/python-prompt.js","webpack://platformio-ide/./src/installer/manager.js","webpack://platformio-ide/./src/release-notes.js","webpack://platformio-ide/./src/terminal.js","webpack://platformio-ide/./src/toolbar.js","webpack://platformio-ide/./src/project/config.js","webpack://platformio-ide/./src/project/task-tree.js","webpack://platformio-ide/./src/custom.js","webpack://platformio-ide/./src/project/tasks.js","webpack://platformio-ide/./src/project/tests.js","webpack://platformio-ide/./src/project/manager.js","webpack://platformio-ide/./src/views/quick-access-tree.js","webpack://platformio-ide/./src/main.js","webpack://platformio-ide/./src/misc.js"],"sourcesContent":["module.exports = require(\"vscode\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * Copyright (c) 2017-present PlatformIO <contact@platformio.org>\n * All rights reserved.\n *\n * This source code is licensed under the license found in the LICENSE file in\n * the root directory of this source tree.\n */\n\nexport const IS_WINDOWS = process.platform.startsWith('win');\nexport const IS_OSX = process.platform == 'darwin';\nexport const IS_LINUX = !IS_WINDOWS && !IS_OSX;\nexport const PIO_CORE_VERSION_SPEC = '>=6.1.6';\nexport const STATUS_BAR_PRIORITY_START = 10;\nexport const CONFLICTED_EXTENSION_IDS = [\n  'llvm-vs-code-extensions.vscode-clangd',\n  'vsciot-vscode.vscode-arduino',\n  'vscode-openapi',\n];\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"Innatera-node-helpers\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"platformio-vscode-debug\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"os\");","/**\n * Copyright (c) 2017-present PlatformIO <contact@platformio.org>\n * All rights reserved.\n *\n * This source code is licensed under the license found in the LICENSE file in\n * the root directory of this source tree.\n */\n\nimport * as pioNodeHelpers from 'Innatera-node-helpers';\n\nimport os from 'os';\nimport vscode from 'vscode';\n\nexport function disposeSubscriptions(subscriptions) {\n  while (subscriptions.length) {\n    subscriptions.pop().dispose();\n  }\n}\n\nexport async function notifyError(title, err) {\n  const description = err.stack || err.toString();\n  const ghbody = `# Description of problem\n  Leave a comment...\n\n  BEFORE SUBMITTING, PLEASE SEARCH FOR DUPLICATES IN\n  - https://github.com/platformio/platformio-vscode-ide/issues?q=is%3Aissue+\n\n  # Configuration\n\n  VSCode: ${vscode.version}\n  PIO IDE: v${getIDEVersion()}\n  System: ${os.type()}, ${os.release()}, ${os.arch()}\n\n  # Exception\n  \\`\\`\\`\n  ${description}\n  \\`\\`\\`\n  `;\n  const reportUrl = pioNodeHelpers.misc.getErrorReportUrl(title, ghbody);\n\n  let action = 'Report a problem';\n  if (!reportUrl.includes('issues/new')) {\n    action = 'Check available solutions';\n  }\n\n  const selected = await vscode.window.showErrorMessage(\n    description.substring(0, 700) + '...',\n    action,\n  );\n  if (selected === action) {\n    vscode.commands.executeCommand('vscode.open', vscode.Uri.parse(reportUrl));\n  }\n  console.error(err);\n}\n\nexport function getIDEManifest() {\n  return vscode.extensions.getExtension('platformio.platformio-ide').packageJSON;\n}\n\nexport function getIDEVersion() {\n  return getIDEManifest().version;\n}\n\nexport async function listCoreSerialPorts() {\n  const script = `\nimport json\nfrom platformio.public import list_serial_ports\n\nprint(json.dumps(list_serial_ports()))\n    `;\n  const output = await pioNodeHelpers.core.getCorePythonCommandOutput(['-c', script]);\n  return JSON.parse(output.trim()).map((item) => {\n    for (const key of ['description', 'hwid']) {\n      if (item[key] === 'n/a') {\n        item[key] = undefined;\n      }\n    }\n    return item;\n  });\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"fs\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"path\");","/**\n * Copyright (c) 2017-present PlatformIO <contact@platformio.org>\n * All rights reserved.\n *\n * This source code is licensed under the license found in the LICENSE file in\n * the root directory of this source tree.\n */\n\nimport { extension } from '../main';\nimport fs from 'fs';\nimport path from 'path';\nimport vscode from 'vscode';\n\nexport function isTalamoProject(projectDir) {\n  const iniContent = fs.readFileSync(\n    path.join(projectDir, 'platformio.ini'),\n    'utf8'\n  );\n  const frameworkMatch = iniContent.match(/\\bframework\\s*=\\s*([\\w-]+)/);\n  return frameworkMatch && frameworkMatch[1] === 'talamo';\n}\n\nexport function isPIOProjectSync(projectDir) {\n  try {\n    fs.accessSync(path.join(projectDir, 'platformio.ini'));\n    return true;\n  } catch (err) {}\n  return false;\n}\n\nexport function getPIOProjectDirs() {\n  return (vscode.workspace.workspaceFolders || [])\n    .map((folder) => folder.uri.fsPath)\n    .filter((projectDir) => isPIOProjectSync(projectDir));\n}\n\nexport function getActiveEditorProjectDir() {\n  const pioProjectDirs = getPIOProjectDirs();\n  if (pioProjectDirs.length < 1) {\n    return undefined;\n  }\n  const editor = vscode.window.activeTextEditor;\n  if (!editor) {\n    return undefined;\n  }\n  const resource = editor.document.uri;\n  if (resource.scheme !== 'file') {\n    return undefined;\n  }\n  const folder = vscode.workspace.getWorkspaceFolder(resource);\n  if (!folder || !isPIOProjectSync(folder.uri.fsPath)) {\n    // outside workspace\n    return undefined;\n  }\n  return folder.uri.fsPath;\n}\n\nexport function getProjectItemState(projectDir, key) {\n  const state = extension.context.globalState.get('projects', {})[projectDir];\n  return (state || {})[key];\n}\n\nexport function updateProjectItemState(projectDir, key, value) {\n  const projects = extension.context.globalState.get('projects', {});\n  if (!projects[projectDir]) {\n    projects[projectDir] = {};\n  }\n  projects[projectDir][key] = value;\n\n  // cleanup removed project\n  for (const item of Object.keys(projects)) {\n    if (!isPIOProjectSync(item)) {\n      delete projects[item];\n    }\n  }\n\n  extension.context.globalState.update('projects', projects);\n  extension.context.globalState.update('lastProjectDir', projectDir);\n}\n\nexport function getLastProjectDir() {\n  return extension.context.globalState.get('lastProjectDir');\n}\n","/**\n * Copyright (c) 2017-present PlatformIO <contact@platformio.org>\n * All rights reserved.\n *\n * This source code is licensed under the license found in the LICENSE file in\n * the root directory of this source tree.\n */\n\nimport * as pioNodeHelpers from 'Innatera-node-helpers';\n\nimport { disposeSubscriptions, notifyError } from './utils';\nimport { getPIOProjectDirs, updateProjectItemState } from './project/helpers';\nimport { IS_OSX } from './constants';\nimport { extension } from './main';\nimport path from 'path';\nimport vscode from 'vscode';\n\nexport default class PIOHome {\n  static defaultStartUrl = '/';\n\n  constructor() {\n    this.subscriptions = [];\n    this._currentPanel = undefined;\n    this._lastStartUrl = PIOHome.defaultStartUrl;\n\n    // close PIO Home when workspaces folders are changed (VSCode reactivates extensiuon)\n    this.subscriptions.push(\n      vscode.workspace.onDidChangeWorkspaceFolders(this.disposePanel.bind(this)),\n    );\n  }\n\n  static async shutdownAllServers() {\n    await pioNodeHelpers.home.shutdownServer();\n    await pioNodeHelpers.home.shutdownAllServers();\n  }\n\n  onPanelDisposed() {\n    this._currentPanel = undefined;\n  }\n\n  disposePanel() {\n    if (!this._currentPanel) {\n      return;\n    }\n    this._currentPanel.dispose();\n    this._currentPanel = undefined;\n  }\n\n  dispose() {\n    pioNodeHelpers.home.shutdownServer();\n    this.disposePanel();\n    disposeSubscriptions(this.subscriptions);\n  }\n\n  async toggle(startUrl = PIOHome.defaultStartUrl) {\n    const column = vscode.window.activeTextEditor\n      ? vscode.window.activeTextEditor.viewColumn\n      : undefined;\n    try {\n      if (this._currentPanel) {\n        if (this._lastStartUrl !== startUrl) {\n          this._currentPanel.webview.html = await this.getWebviewContent(startUrl);\n        }\n        return this._currentPanel.reveal(column);\n      }\n    } catch (err) {\n      console.warn(err);\n    }\n    this._currentPanel = await this.newPanel(startUrl);\n  }\n\n  async newPanel(startUrl) {\n    const panel = vscode.window.createWebviewPanel(\n      'pioHome',\n      extension.getEnterpriseSetting('pioHomeTitle', 'Innatera Home'),\n      vscode.ViewColumn.One,\n      {\n        enableScripts: true,\n        retainContextWhenHidden: true,\n      },\n    );\n    this.subscriptions.push(panel.onDidDispose(this.onPanelDisposed.bind(this)));\n    panel.iconPath = vscode.Uri.file(\n      path.join(\n        extension.context.extensionPath,\n        'assets',\n        'images',\n        'platformio-mini-logo.svg',\n      ),\n    );\n    panel.webview.html = this.getLoadingContent();\n    try {\n      panel.webview.html = await this.getWebviewContent(startUrl);\n    } catch (err) {\n      if (!err.toString().includes('Webview is disposed')) {\n        notifyError('Start PIO Home Server', err);\n      }\n    }\n    return panel;\n  }\n\n  getTheme() {\n    const workbench = vscode.workspace.getConfiguration('workbench') || {};\n    return (workbench.colorTheme || '').toLowerCase().includes('light')\n      ? 'light'\n      : 'dark';\n  }\n\n  getLoadingContent() {\n    const theme = this.getTheme();\n    return `<!DOCTYPE html>\n    <html lang=\"en\">\n    <body style=\"background-color: ${theme === 'light' ? '#FFF' : '#1E1E1E'}\">\n      <div style=\"padding: 15px;\">Loading...</div>\n    </body>\n    </html>`;\n  }\n\n  async getWebviewContent(startUrl) {\n    this._lastStartUrl = startUrl;\n    await pioNodeHelpers.home.ensureServerStarted({\n      port: extension.getConfiguration('pioHomeServerHttpPort'),\n      host: extension.getConfiguration('pioHomeServerHttpHost'),\n      onIDECommand: await this.onIDECommand.bind(this),\n    });\n    const theme = this.getTheme();\n    const iframeId = `pioHomeIFrame-${vscode.env.sessionId}`;\n    const iframeScript = `\n<script>\n  function execCommand(data) {\n    document.getElementById('${iframeId}').contentWindow.postMessage({'command': 'execCommand', 'data': data}, '*');\n  }\n  for (const command of ['copy', 'paste', 'cut']) {\n    document.addEventListener(command, (e) => {\n      execCommand(command);\n    });\n  }\n  document.addEventListener('selectstart', (e) => {\n    execCommand('selectAll');\n    e.preventDefault();\n  });\n  window.addEventListener('keydown', (e) => {\n    if (e.key === 'z' && e.metaKey) {\n      execCommand(e.shiftKey ? 'redo' : 'undo');\n    }\n  });\n  window.addEventListener('message', (e) => {\n    if (e.data.command === 'kbd-event') {\n      window.dispatchEvent(new KeyboardEvent('keydown', e.data.data));\n    }\n  });\n</script>\n  `;\n    return `<!DOCTYPE html>\n      <html lang=\"en\">\n      <head>${IS_OSX ? iframeScript : ''}</head>\n      <body style=\"margin: 0; padding: 0; height: 100%; overflow: hidden; background-color: ${\n        theme === 'light' ? '#FFF' : '#1E1E1E'\n      }\">\n        <iframe id=\"${iframeId}\" src=\"${pioNodeHelpers.home.getFrontendUrl({\n          start: startUrl,\n          theme,\n          workspace: extension.getEnterpriseSetting('defaultPIOHomeWorkspace'),\n        })}\"\n          width=\"100%\"\n          height=\"100%\"\n          frameborder=\"0\"\n          style=\"border: 0; left: 0; right: 0; bottom: 0; top: 0; position:absolute;\" />\n      </body>\n      </html>\n    `;\n  }\n\n  async onIDECommand(command, params) {\n    switch (command) {\n      case 'open_project':\n        return this.onOpenProjectCommand(params);\n      case 'open_text_document':\n        return await this.onOpenTextDocumentCommand(params);\n      case 'get_pio_project_dirs':\n        return this.onGetPIOProjectDirs();\n    }\n  }\n\n  onOpenProjectCommand(params) {\n    if (extension.projectManager) {\n      updateProjectItemState(vscode.Uri.file(params).fsPath, 'selectedEnv', undefined);\n      extension.projectManager.switchToProject(vscode.Uri.file(params).fsPath, {\n        force: true,\n      });\n    }\n    this.disposePanel();\n    if (vscode.workspace.workspaceFolders) {\n      vscode.workspace.updateWorkspaceFolders(\n        vscode.workspace.workspaceFolders.length,\n        null,\n        { uri: vscode.Uri.file(params) },\n      );\n    } else {\n      vscode.commands.executeCommand('vscode.openFolder', vscode.Uri.file(params));\n    }\n    vscode.commands.executeCommand('workbench.view.explorer');\n    return true;\n  }\n\n  async onOpenTextDocumentCommand(params) {\n    const editor = await vscode.window.showTextDocument(vscode.Uri.file(params.path));\n    const gotoPosition = new vscode.Position(\n      (params.line || 1) - 1,\n      (params.column || 1) - 1,\n    );\n    editor.selection = new vscode.Selection(gotoPosition, gotoPosition);\n    editor.revealRange(\n      new vscode.Range(gotoPosition, gotoPosition),\n      vscode.TextEditorRevealType.InCenter,\n    );\n    return true;\n  }\n\n  onGetPIOProjectDirs() {\n    return getPIOProjectDirs();\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"fs-plus\");","/**\n * Copyright (c) 2017-present PlatformIO <contact@platformio.org>\n * All rights reserved.\n *\n * This source code is licensed under the license found in the LICENSE file in\n * the root directory of this source tree.\n */\n\nimport fs from 'fs-plus';\nimport vscode from 'vscode';\n\nexport default class PythonPrompt {\n  STATUS_TRY_AGAIN = 0;\n  STATUS_ABORT = 1;\n  STATUS_CUSTOMEXE = 2;\n\n  async prompt() {\n    const selectedItem = await vscode.window.showInformationMessage(\n      'Innatera: Can not find working Python 3.6+ Interpreter. Please install the latest Python 3 and restart VSCode',\n      { title: 'Install Python', isCloseAffordance: false },\n      { title: 'I have Python', isCloseAffordance: false },\n      { title: 'Try again', isCloseAffordance: false },\n      { title: 'Abort Innatera IDE Installation', isCloseAffordance: true },\n    );\n\n    let result = { status: this.STATUS_TRY_AGAIN };\n    let pythonExecutable = undefined;\n    switch (selectedItem ? selectedItem.title : undefined) {\n      case 'Install Python':\n        vscode.commands.executeCommand(\n          'vscode.open',\n          vscode.Uri.parse(\n            'https://docs.platformio.org/en/latest/faq/install-python.html',\n          ),\n        );\n        break;\n      case 'I have Python':\n        pythonExecutable = await vscode.window.showInputBox({\n          prompt: 'Please specify a full path to Python executable file',\n          placeHolder: 'Full path to python/python.exe',\n          validateInput: (value) =>\n            !fs.isFileSync(value) ? 'Invalid path to Python Interpreter' : null,\n        });\n        if (pythonExecutable) {\n          result = {\n            status: this.STATUS_CUSTOMEXE,\n            pythonExecutable,\n          };\n        }\n        break;\n      case 'Abort Innatera IDE Installation':\n        result = { status: this.STATUS_ABORT };\n        break;\n    }\n\n    return result;\n  }\n}\n","/**\n * Copyright (c) 2017-present PlatformIO <contact@platformio.org>\n * All rights reserved.\n *\n * This source code is licensed under the license found in the LICENSE file in\n * the root directory of this source tree.\n */\n\nimport * as pioNodeHelpers from 'Innatera-node-helpers';\n\nimport PIOHome from '../home';\nimport { PIO_CORE_VERSION_SPEC } from '../constants';\nimport PythonPrompt from './python-prompt';\nimport { extension } from '../main';\nimport path from 'path';\nimport vscode from 'vscode';\n\nexport default class InstallationManager {\n  LOCK_TIMEOUT = 1 * 60 * 1000; // 1 minute\n  LOCK_KEY = 'installer-lock';\n\n  constructor(disableAutoUpdates = false) {\n    const config = vscode.workspace.getConfiguration('platformio-ide');\n    // new PlatformIOCoreStage(\n      this.stages = [\n      new pioNodeHelpers.installer.PlatformIOCoreStage(\n        {\n          getValue: (key) => extension.context.globalState.get(key),\n          setValue: (key, value) => extension.context.globalState.update(key, value),\n        },\n        this.onDidStatusChange.bind(this),\n        {\n          pioCoreVersionSpec: PIO_CORE_VERSION_SPEC,\n          useBuiltinPython: config.get('useBuiltinPython'),\n          useBuiltinPIOCore: config.get('useBuiltinPIOCore'),\n          useDevelopmentPIOCore: config.get('useDevelopmentPIOCore'),\n          pythonPrompt: new PythonPrompt(),\n          disableAutoUpdates: disableAutoUpdates,\n          predownloadedPackageDir: path.join(\n            extension.context.extensionPath,\n            'assets',\n            'predownloaded',\n          ),\n        },\n      ),\n    ];\n  }\n\n  onDidStatusChange() {\n    // increase lock timeout on each stage update\n    if (this.locked()) {\n      this.lock();\n    }\n  }\n\n  lock() {\n    return extension.context.globalState.update(this.LOCK_KEY, new Date().getTime());\n  }\n\n  unlock() {\n    return extension.context.globalState.update(this.LOCK_KEY, undefined);\n  }\n\n  locked() {\n    const lockTime = extension.context.globalState.get(this.LOCK_KEY);\n    if (!lockTime) {\n      return false;\n    }\n    return new Date().getTime() - parseInt(lockTime) <= this.LOCK_TIMEOUT;\n  }\n\n  async check() {\n    let result = true;\n    for (const stage of this.stages) {\n      try {\n        if (!(await stage.check())) {\n          result = false;\n        }\n      } catch (err) {\n        result = false;\n        console.warn(err);\n      }\n    }\n    return result;\n  }\n\n  async install(progress) {\n    const stageIncrementTotal = 100 / this.stages.length;\n    // shutdown all PIO Home servers which block python.exe on Windows\n    await PIOHome.shutdownAllServers();\n    for (const stage of this.stages) {\n      await stage.install((message, increment) => {\n        progress.report({\n          message,\n          increment: stageIncrementTotal * (increment / 100),\n        });\n      });\n    }\n    progress.report({ message: 'Finished! Please restart VSCode.', increment: 100 });\n  }\n\n  destroy() {\n    return this.stages.map((stage) => stage.destroy());\n  }\n}\n","/**\n * Copyright (c) 2017-present PlatformIO <contact@platformio.org>\n * All rights reserved.\n *\n * This source code is licensed under the license found in the LICENSE file in\n * the root directory of this source tree.\n */\n\nimport { disposeSubscriptions } from './utils';\nimport { extension } from './main';\nimport { promises as fs } from 'fs';\nimport path from 'path';\nimport vscode from 'vscode';\n\nexport default class PIOReleaseNotes {\n  constructor() {\n    this.version = extension.context.extension.packageJSON.version;\n    this._currentPanel = undefined;\n\n    this.subscriptions = [\n      vscode.commands.registerCommand('platformio-ide.showReleaseNotes', () =>\n        this.toggle(),\n      ),\n    ];\n\n    const stateKey = 'showedReleaseNotesFor';\n    if (extension.context.globalState.get(stateKey) !== this.version) {\n      extension.context.globalState.update(stateKey, this.version);\n      this.toggle();\n    }\n  }\n\n  dispose() {\n    disposeSubscriptions(this.subscriptions);\n  }\n\n  async toggle() {\n    const column = vscode.window.activeTextEditor\n      ? vscode.window.activeTextEditor.viewColumn\n      : undefined;\n    try {\n      if (this._currentPanel) {\n        this._currentPanel.webview.html = await this.getWebviewContent();\n        return this._currentPanel.reveal(column);\n      }\n    } catch (err) {\n      console.warn(err);\n    }\n    this._currentPanel = await this.newPanel();\n  }\n\n  async newPanel() {\n    const panel = vscode.window.createWebviewPanel(\n      'pioReleaseNotes',\n      'Innatera IDE: Release Notes',\n      vscode.ViewColumn.One,\n      {\n        enableScripts: true,\n        retainContextWhenHidden: true,\n      },\n    );\n    panel.iconPath = vscode.Uri.file(\n      path.join(\n        extension.context.extensionPath,\n        'assets',\n        'images',\n        'platformio-mini-logo.svg',\n      ),\n    );\n    panel.onDidDispose(\n      () => (this._currentPanel = undefined),\n      undefined,\n      this.subscriptions,\n    );\n    const logoSrc = panel.webview.asWebviewUri(\n      vscode.Uri.file(\n        path.join(\n          extension.context.extensionPath,\n          'assets',\n          'images',\n          'platformio-logo.png',\n        ),\n      ),\n    );\n    panel.webview.html = await this.getWebviewContent(logoSrc);\n    return panel;\n  }\n\n  async getWebviewContent(logoSrc) {\n    const releaseNotes = await this.readReleaseNotes();\n    return `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Innatera IDE: Release Notes</title>\n  <style>ul { padding-top: 5px; } li { padding-bottom: 4px; }</style>\n</head>\n<body>\n  <table border=\"0\">\n  <tr>\n    <td><img src=\"${logoSrc}\" width=\"28px\" height=\"28px\"></td>\n    <td style=\"padding-left: 10px\"><h1>Innatera IDE Release Notes</h1></td>\n  </tr>\n  </table>\n  <div>\n    Welcome to the ${this.version} release of Innatera IDE.\n    There are many updates in this version that we hope you'll like.\n  </div>\n  <p>\n    <b>Release History</b>: Want to read release notes for the previous versions?\n    Please visit <a href=\"https://github.com/platformio/platformio-vscode-ide/blob/develop/CHANGELOG.md\">PlatformIO IDE Changelog</a>\n    for more detailed information.\n  </p>\n  <p id=\"content\">Loading...</p>\n  <h2>Stay in touch with us</h2>\n  <p>\n    Please follow us on <a href=\"https://www.linkedin.com/company/platformio\">LinkedIn</a> and Twitter <a href=\"https://twitter.com/PlatformIO_Org\">@PlatformIO_Org</a>\n    to keep up to date with the latest news, articles and tips!\n  </p>\n  <hr />\n  <p>\n    <b>Innatera Core</b>: If you would like to read the Innatera Core release notes,\n    go to the <a href=\"https://docs.platformio.org/en/latest/core/history.html\">Release Notes</a> on <a href=\"https://docs.platformio.org/\">docs.platformio.org</a>.\n  </p>\n  <textarea id=\"pioRNMarkdown\" hidden=\"hidden\">${releaseNotes}</textarea>\n  <script src=\"https://cdn.jsdelivr.net/npm/marked/marked.min.js\"></script>\n  <script>\n    document.getElementById('content').innerHTML =\n      marked.parse(document.getElementById('pioRNMarkdown').value);\n  </script>\n</body>\n</html>`;\n  }\n\n  async readReleaseNotes() {\n    const changelogPath = path.join(extension.context.extensionPath, 'CHANGELOG.md');\n    try {\n      const contents = await fs.readFile(changelogPath, { encoding: 'utf-8' });\n      const startsAt = contents.indexOf('\\n## ');\n      return contents.substring(startsAt, contents.indexOf('\\n## ', startsAt + 3));\n    } catch (err) {\n      return err.toString();\n    }\n  }\n}\n","/**\n * Copyright (c) 2017-present PlatformIO <contact@platformio.org>\n * All rights reserved.\n *\n * This source code is licensed under the license found in the LICENSE file in\n * the root directory of this source tree.\n */\n\nimport vscode from 'vscode';\n\nexport default class PIOTerminal {\n  constructor() {\n    this._instance = undefined;\n  }\n\n  new() {\n    const envClone = Object.assign({}, process.env);\n    if (process.env.PLATFORMIO_PATH) {\n      envClone.PATH = process.env.PLATFORMIO_PATH;\n      envClone.Path = process.env.PLATFORMIO_PATH;\n    }\n    return vscode.window.createTerminal({\n      name: 'Innatera CLI',\n      env: envClone,\n    });\n  }\n\n  sendText(text) {\n    if (!this._instance || this._instance.exitStatus !== undefined) {\n      this._instance = this.new();\n    }\n    this._instance.sendText(text);\n    this._instance.show();\n  }\n\n  dispose() {\n    if (this._instance) {\n      this._instance.dispose();\n    }\n    this._instance = undefined;\n  }\n}\n","/**\n * Copyright (c) 2017-present PlatformIO <contact@platformio.org>\n * All rights reserved.\n *\n * This source code is licensed under the license found in the LICENSE file in\n * the root directory of this source tree.\n */\n\nimport { STATUS_BAR_PRIORITY_START } from './constants';\nimport { disposeSubscriptions } from './utils';\nimport { extension } from './main';\nimport vscode from 'vscode';\n\nclass ToolbarButton {\n  constructor(text, tooltip, commands) {\n    this.text = text;\n    this.tooltip = tooltip;\n    this.commands = ToolbarButtonCommands.from(commands);\n  }\n\n  createStatusBarItem(options = { priority: 0 }) {\n    const item = vscode.window.createStatusBarItem(\n      `pio-toolbar-${this.tooltip || this.text}`,\n      vscode.StatusBarAlignment.Left,\n      STATUS_BAR_PRIORITY_START + options.priority + 1,\n    );\n    item.name = this.tooltip || 'PlatformIO: Toolbar Item';\n    item.text = this.text;\n    item.tooltip = this.tooltip;\n    item.command = {\n      title: this.tooltip,\n      command: PIOToolbar.RUN_BUTTON_COMMANDS_ID,\n      arguments: [this],\n    };\n    return item;\n  }\n}\n\nclass ToolbarButtonCommands {\n  constructor(id, args = undefined) {\n    this.id = id;\n    this.args = args;\n  }\n\n  static from(rawCommands) {\n    const result = [];\n    if (!rawCommands) {\n      return result;\n    }\n    if (!Array.isArray(rawCommands)) {\n      rawCommands = [rawCommands];\n    }\n    return rawCommands.map((item) =>\n      typeof item === 'object'\n        ? new ToolbarButtonCommands(item.id, item.args)\n        : new ToolbarButtonCommands(item),\n    );\n  }\n}\n\nexport default class PIOToolbar {\n  static RUN_BUTTON_COMMANDS_ID = 'platformio-ide.runToolbarButtonCommand';\n\n  constructor(options = { filterCommands: undefined, ignoreCommands: undefined }) {\n    this.options = options;\n    this.subscriptions = [];\n    this.show();\n  }\n\n  dispose() {\n    disposeSubscriptions(this.subscriptions);\n  }\n\n  static getButtons() {\n    const items = extension.getConfiguration('toolbar') || [];\n    return items.map(\n      (item) =>\n        new ToolbarButton(\n          item.text,\n          item.tooltip,\n          ToolbarButtonCommands.from(item.commands),\n        ),\n    );\n  }\n\n  show() {\n    this.refresh();\n  }\n\n  refresh() {\n    this.dispose();\n    const buttons = PIOToolbar.getButtons().filter(\n      (button) =>\n        (!this.options.filterCommands ||\n          button.commands.some((cmd) =>\n            this.options.filterCommands.includes(cmd.id),\n          )) &&\n        (!this.options.ignoreCommands ||\n          !button.commands.some((cmd) => this.options.ignoreCommands.includes(cmd.id))),\n    );\n\n    buttons.forEach((button, index) => {\n      const sbItem = button.createStatusBarItem({ priority: buttons.length - index });\n      sbItem.show();\n      this.subscriptions.push(sbItem);\n    });\n\n    this.subscriptions.push(\n      vscode.workspace.onDidChangeConfiguration((e) =>\n        e.affectsConfiguration('platformio-ide.toolbar') ? this.refresh() : undefined,\n      ),\n      vscode.commands.registerCommand(\n        PIOToolbar.RUN_BUTTON_COMMANDS_ID,\n        this.onButtonClick.bind(this),\n      ),\n    );\n  }\n\n  async onButtonClick(button) {\n    for (const cmd of button.commands) {\n      let args = cmd.args || [];\n      if (!Array.isArray(args)) {\n        args = [args];\n      }\n      for (let i = 0; i < args.length; i++) {\n        args[i] = await this._expandArgVariables(args[i]);\n      }\n      await vscode.commands.executeCommand(cmd.id, ...args);\n    }\n  }\n\n  async _expandArgVariables(arg) {\n    if (!arg.includes('${')) {\n      return arg;\n    }\n    const matches = arg.match(/\\$\\{[^\\}]+\\}/g);\n    for (const match of matches) {\n      if (match.startsWith('${command:')) {\n        arg = arg.replace(\n          match,\n          await vscode.commands.executeCommand(match.substring(10, match.length - 1)),\n        );\n      }\n    }\n    return arg;\n  }\n}\n","/**\n * Copyright (c) 2017-present PlatformIO <contact@platformio.org>\n * All rights reserved.\n *\n * This source code is licensed under the license found in the LICENSE file in\n * the root directory of this source tree.\n */\n\nimport * as pioNodeHelpers from 'Innatera-node-helpers';\n\nimport { disposeSubscriptions, listCoreSerialPorts } from '../utils';\nimport path from 'path';\nimport vscode from 'vscode';\n\nexport class ProjectConfigLanguageProvider {\n  static DOCUMENT_SELECTOR = { language: 'ini' };\n  SCOPE_PLATFORMIO = 'platformio';\n  SCOPE_ENV = 'env';\n\n  constructor() {\n    this.diagnosticCollection =\n      vscode.languages.createDiagnosticCollection('PlatformIO');\n    this.subscriptions = [\n      this.diagnosticCollection,\n      vscode.languages.registerHoverProvider(\n        ProjectConfigLanguageProvider.DOCUMENT_SELECTOR,\n        {\n          provideHover: async (document, position) =>\n            await this.provideHover(document, position),\n        },\n      ),\n      vscode.languages.registerCompletionItemProvider(\n        ProjectConfigLanguageProvider.DOCUMENT_SELECTOR,\n        {\n          provideCompletionItems: async (document, position, token, context) =>\n            await this.provideCompletionItems(document, position, token, context),\n        },\n      ),\n      vscode.workspace.onDidOpenTextDocument((document) =>\n        this.lintConfig(document.uri),\n      ),\n      vscode.workspace.onDidSaveTextDocument((document) =>\n        this.lintConfig(document.uri),\n      ),\n    ];\n    // if (vscode.languages.registerInlineCompletionItemProvider) {\n    //   this.subscriptions.push(\n    //     vscode.languages.registerInlineCompletionItemProvider(\n    //       ProjectConfigLanguageProvider.DOCUMENT_SELECTOR,\n    //       {\n    //         provideInlineCompletionItems: async (document, position) =>\n    //           await this.provideCompletionItems(document, position, true),\n    //       }\n    //     )\n    //   );\n    // }\n    this._optionsCache = new Map();\n    this._ports = undefined;\n\n    // vscode.window.visibleTextEditors.forEach((editor) =>\n    //   this.lintConfig(editor.document)\n    // );\n  }\n\n  dispose() {\n    disposeSubscriptions(this.subscriptions);\n    this._optionsCache.clear();\n    this.diagnosticCollection.clear();\n  }\n\n  /**\n   * Completion\n   */\n  async getOptions(document) {\n    const configPath = document.uri.fsPath;\n    if (this._optionsCache.has(configPath)) {\n      return this._optionsCache.get(configPath);\n    }\n    const script = `\nimport json\nfrom platformio.public import get_config_options_schema\n\nprint(json.dumps(get_config_options_schema()))\n  `;\n    const output = await pioNodeHelpers.core.getCorePythonCommandOutput(\n      ['-c', script],\n      { projectDir: path.dirname(configPath) },\n    );\n    this._optionsCache.set(configPath, JSON.parse(output));\n    return this._optionsCache.get(configPath);\n  }\n\n  renderOptionDocs(option) {\n    const attrs = [\n      ['Name', option.name],\n      ['Group', option.group],\n      ['Type', option.type],\n      ['Multiple', option.multiple ? 'yes' : 'no'],\n    ];\n    if (option.sysenvvar) {\n      attrs.push(['EnvironmentVariable', option.sysenvvar]);\n    }\n    if (option.type === 'choice') {\n      attrs.push(['Choices', option.choices.join(', ')]);\n    }\n    if (option.min !== undefined) {\n      attrs.push(['Minimum', option.min]);\n    }\n    if (option.max !== undefined) {\n      attrs.push(['Maximum', option.max]);\n    }\n    if (option.default !== null || option.type === 'boolean') {\n      let value = option.default;\n      if (option.type === 'boolean') {\n        value = option.default ? 'yes' : 'no';\n      } else if (option.multiple && Array.isArray(option.default)) {\n        value = option.default.join(', ');\n      }\n      attrs.push(['Default', value]);\n    }\n    const docs = new vscode.MarkdownString();\n    docs.appendCodeblock(\n      attrs.map(([name, value]) => `${name} = ${value}`).join('\\n'),\n      'ini',\n    );\n    docs.appendMarkdown(`\n${option.description}\n\n[View documentation](https://docs.platformio.org/en/latest/projectconf/sections/${option.scope}/options/${option.group}/${option.name}.html?utm_source=vscode&utm_medium=completion)\n`);\n    return docs;\n  }\n\n  getScopeAt(document, position) {\n    const text = document.getText(\n      new vscode.Range(new vscode.Position(0, 0), position),\n    );\n    for (const line of text.split('\\n').reverse()) {\n      if (line.startsWith('[platformio]')) {\n        return this.SCOPE_PLATFORMIO;\n      } else if (line.startsWith('[env]') || line.startsWith('[env:')) {\n        return this.SCOPE_ENV;\n      }\n    }\n    return undefined;\n  }\n\n  async getOptionAt(document, position) {\n    for (let lineNum = position.line; lineNum > 0; lineNum--) {\n      const line = document.lineAt(lineNum).text;\n      if (line.startsWith(' ') || line.startsWith('\\t')) {\n        continue;\n      }\n      const optionName = line.split('=')[0].trim();\n      return (await this.getOptions(document)).find(\n        (option) => option.name === optionName,\n      );\n    }\n  }\n\n  isOptionValueLocation(document, position) {\n    const line = document.lineAt(position.line).text;\n    const sepPos = line.indexOf('=');\n    return (\n      line.startsWith(' ') ||\n      line.startsWith('\\t') ||\n      (sepPos > 0 && position.character > sepPos)\n    );\n  }\n\n  async provideHover(document, position) {\n    const word = document.getText(document.getWordRangeAtPosition(position));\n    const option = (await this.getOptions(document)).find(\n      (option) => option.name === word,\n    );\n    if (option) {\n      return new vscode.Hover(this.renderOptionDocs(option));\n    }\n    return this.providePackageHover(document, position);\n  }\n\n  async providePackageHover(document, position) {\n    const line = document.lineAt(position.line).text;\n    let rawValue = undefined;\n    if (line.startsWith(' ') || line.startsWith('\\t')) {\n      rawValue = line;\n    } else if (line.includes('=')) {\n      rawValue = line.split('=', 2)[1];\n    }\n    if (!rawValue) {\n      return;\n    }\n    const pkgRegExp = /^(([a-z\\d_\\-]+)\\/)?([a-z\\d\\_\\- ]+)/i;\n    const matches = pkgRegExp.exec(rawValue.trim());\n    if (!matches) {\n      return;\n    }\n\n    const option = await this.getOptionAt(document, position);\n    if (!['platform', 'lib_deps'].includes(option.name)) {\n      return;\n    }\n\n    const pkgOwner = matches[2];\n    const pkgName = matches[3];\n    const pkgUrlParts = ['https://registry.platformio.org'];\n    if (pkgOwner) {\n      pkgUrlParts.push(option.name === 'platform' ? 'platforms' : 'libraries');\n      pkgUrlParts.push(pkgOwner.trim(), encodeURIComponent(pkgName.trim()));\n    } else {\n      const qs = new URLSearchParams();\n      qs.set('t', option.group);\n      qs.set('q', `name:\"${pkgName.trim()}\"`);\n      pkgUrlParts.push(`search?${qs.toString()}`);\n    }\n\n    return new vscode.Hover(\n      new vscode.MarkdownString(\n        `[Open in Innatera Registry](${pkgUrlParts.join('/')})`,\n      ),\n    );\n  }\n\n  async provideCompletionItems(document, position, token, context, isInline = false) {\n    if (token.isCancellationRequested) {\n      return;\n    }\n    return await (this.isOptionValueLocation(document, position)\n      ? this.provideCompletionValues(document, position, isInline)\n      : this.provideCompletionOptions(document, position, isInline));\n  }\n\n  async provideCompletionOptions(document, position, isInline = false) {\n    const scope = this.getScopeAt(document, position);\n    if (!scope) {\n      return;\n    }\n    const options = await this.getOptions(document);\n    return options\n      .filter((option) => option.scope === scope)\n      .map((option) => {\n        if (isInline) {\n          return new vscode.InlineCompletionItem(option.name);\n        }\n        const item = new vscode.CompletionItem(\n          option.name,\n          vscode.CompletionItemKind.Field,\n        );\n        item.documentation = this.renderOptionDocs(option);\n        return item;\n      });\n  }\n\n  async provideCompletionValues(document, position) {\n    const option = await this.getOptionAt(document, position);\n    if (!option) {\n      return;\n    }\n    switch (option.name) {\n      case 'upload_port':\n      case 'monitor_port':\n      case 'test_port':\n        return await this.provideCompletionPorts();\n\n      case 'upload_speed':\n      case 'monitor_speed':\n      case 'test_speed':\n        return await this.provideCompletionBaudrates(option);\n    }\n    return this.provideTypedCompletionValues(option);\n  }\n\n  async provideTypedCompletionValues(option) {\n    const values = [];\n    let defaultValue = option.default;\n    switch (option.type) {\n      case 'boolean':\n        values.push('yes', 'no');\n        defaultValue = option.default ? 'yes' : 'no';\n        break;\n      case 'choice':\n        option.choices.forEach((item) => values.push(item));\n        break;\n\n      case 'integer range':\n        for (let i = option.min; i <= option.max; i++) {\n          values.push(i);\n        }\n        break;\n    }\n    return values.map((value) => {\n      const item = new vscode.CompletionItem(\n        value.toString(),\n        vscode.CompletionItemKind.EnumMember,\n      );\n      item.preselect = defaultValue === value;\n      return item;\n    });\n  }\n\n  createCustomCompletionValueItem() {\n    const item = new vscode.CompletionItem('Custom', vscode.CompletionItemKind.Value);\n    item.insertText = '';\n    item.sortText = 'Z';\n    return item;\n  }\n\n  async provideCompletionPorts() {\n    if (!this._ports) {\n      this._ports = await listCoreSerialPorts();\n      setTimeout(() => (this._ports = undefined), 3000);\n    }\n    const items = (this._ports || []).map((port) => {\n      const item = new vscode.CompletionItem(\n        port.port,\n        vscode.CompletionItemKind.Value,\n      );\n      item.detail = port.description;\n      item.documentation = port.hwid;\n      return item;\n    });\n    items.push(this.createCustomCompletionValueItem());\n    return items;\n  }\n\n  async provideCompletionBaudrates(option) {\n    const values = [\n      600, 1200, 2400, 4800, 9600, 14400, 19200, 28800, 38400, 57600, 115200, 230400,\n    ];\n    const items = values.map((value, index) => {\n      const item = new vscode.CompletionItem(\n        value.toString(),\n        vscode.CompletionItemKind.Value,\n      );\n      item.sortText = String.fromCharCode(index + 65);\n      item.preselect = option.default === value;\n      return item;\n    });\n    items.push(this.createCustomCompletionValueItem());\n    return items;\n  }\n\n  /**\n   * Linting\n   */\n  async lintConfig(uri) {\n    // ignore non-platformio.ini docs\n    if (path.basename(uri.fsPath) !== 'platformio.ini') {\n      return;\n    }\n    const script = `\nimport json\n\nfrom platformio.public import ProjectConfig\n\nprint(json.dumps(ProjectConfig.lint()))\n  `;\n    this.diagnosticCollection.clear();\n    const projectDir = path.dirname(uri.fsPath);\n    const output = await pioNodeHelpers.core.getCorePythonCommandOutput(\n      ['-c', script],\n      { projectDir },\n    );\n    const { errors, warnings } = JSON.parse(output);\n    this.diagnosticCollection.set(\n      uri,\n      warnings.map(\n        (msg) =>\n          new vscode.Diagnostic(\n            new vscode.Range(0, 0, 0, 0),\n            msg,\n            vscode.DiagnosticSeverity.Warning,\n          ),\n      ),\n    );\n    const uriDiagnostics = new Map();\n    errors.forEach((data) => {\n      const sourceUri = data.source\n        ? vscode.Uri.file(\n            path.isAbsolute(data.source)\n              ? data.source\n              : path.join(projectDir, data.source),\n          )\n        : uri;\n      const diagnostics = uriDiagnostics.get(sourceUri.fsPath) || [];\n      diagnostics.push(\n        new vscode.Diagnostic(\n          new vscode.Range(data?.lineno - 1 || 0, 0, data?.lineno || 0, 0),\n          data.message,\n          vscode.DiagnosticSeverity.Error,\n        ),\n      );\n      uriDiagnostics.set(sourceUri.fsPath, diagnostics);\n    });\n    uriDiagnostics.forEach((diagnostics, fsPath) =>\n      this.diagnosticCollection.set(vscode.Uri.file(fsPath), diagnostics),\n    );\n    return !errors.length;\n  }\n}\n","/**\n * Copyright (c) 2017-present PlatformIO <contact@platformio.org>\n * All rights reserved.\n *\n * This source code is licensed under the license found in the LICENSE file in\n * the root directory of this source tree.\n */\n\nimport * as vscode from 'vscode';\n\nexport default class ProjectTasksTreeProvider {\n  constructor(id, envs, tasks, selectedEnv = undefined, multiEnvExplorer = false) {\n    this.id = id;\n    this.envs = envs;\n    this.tasks = tasks;\n    this.selectedEnv = selectedEnv;\n    this.multiEnvProject = this.envs.length > 1;\n    this.multiEnvExplorer = multiEnvExplorer;\n  }\n\n  getEnvTasks(env = undefined, group = undefined) {\n    const cmpGroup = (task) => {\n      if (!group) {\n        return true;\n      }\n      return task.group === group;\n    };\n    const result = this.tasks.filter((task) => cmpGroup(task) && task.coreEnv === env);\n    // merge default/env-independent tasks\n    if (env) {\n      result.push(\n        ...this.tasks.filter(\n          (task) =>\n            cmpGroup(task) &&\n            env !== ProjectTasksTreeProvider.DEFAULT_ENV_NAME &&\n            !task.multienv,\n        ),\n      );\n    }\n    return result;\n  }\n\n  getTreeItem(item) {\n    return item instanceof vscode.TreeItem ? item : this.taskToTreeItem(item);\n  }\n\n  taskToTreeItem(task) {\n    const treeItem = new vscode.TreeItem(task.name);\n    treeItem.iconPath = new vscode.ThemeIcon('circle-outline');\n    treeItem.tooltip = task.title;\n    treeItem.command = {\n      title: task.title,\n      command: 'platformio-ide._runProjectTask',\n      arguments: [task],\n    };\n    if (!task.coreEnv && task.multienv && this.multiEnvProject) {\n      treeItem.label += ' All';\n    }\n    return treeItem;\n  }\n\n  getChildren(element) {\n    if (element && element.group) {\n      return this.getEnvTasks(element.env, element.group);\n    } else if (element) {\n      return this.getEnvChildren(element.env);\n    } else if (this.selectedEnv && !this.multiEnvExplorer) {\n      return this.getEnvChildren(this.selectedEnv);\n    }\n    return this.getRootChildren();\n  }\n\n  getRootChildren() {\n    const result = [];\n    for (const env of [ ...this.envs]) {\n      const treeItem = new vscode.TreeItem(\n        env ,\n        env && (env === this.selectedEnv || !this.multiEnvProject)\n          ? vscode.TreeItemCollapsibleState.Expanded\n          : vscode.TreeItemCollapsibleState.Collapsed,\n      );\n      treeItem.id = `${this.id}-${env}`;\n      treeItem.env = env;\n      treeItem.iconPath = new vscode.ThemeIcon('root-folder');\n      result.push(treeItem);\n    }\n    return result;\n  }\n\n  getEnvChildren(env) {\n    const envTasks = this.getEnvTasks(env);\n    if (!envTasks.length) {\n      return [new vscode.TreeItem('Loading...')];\n    }\n    const result = envTasks.filter((task) => !task.group);\n    // root groups\n    for (const group of this.getTaskGroups(envTasks)) {\n      const element = new vscode.TreeItem(\n        group,\n        ['Platform'].includes(group)\n          ? vscode.TreeItemCollapsibleState.Expanded\n          : vscode.TreeItemCollapsibleState.Collapsed,\n      );\n      element.env = env;\n      element.group = group;\n      element.iconPath = vscode.ThemeIcon.Folder;\n      result.push(element);\n    }\n    return result;\n  }\n\n  getTaskGroups(tasks) {\n    const result = [];\n    const candidates = tasks.filter((task) => task.group).map((task) => task.group);\n    // reorder\n    if (candidates.includes('Platform')) {\n      result.push('Platform');\n    }\n    for (const group of candidates) {\n      if (!result.includes(group)) {\n        result.push(group);\n      }\n    }\n    return result;\n  }\n}\n","import * as pioNodeHelpers from 'Innatera-node-helpers';\nimport { disposeSubscriptions, notifyError } from './utils';\nimport { IS_OSX, IS_WINDOWS} from './constants';\nimport { extension } from './main';\nimport path from 'path';\nimport vscode from 'vscode';\n\nexport default class PIOCustom {\n  static defaultStartUrl = '/';\n  vscode = require('vscode');\n  panel = undefined;\n\n  constructor() {\n    this.subscriptions = [];\n    this._currentPanel = undefined;\n    this._lastStartUrl = PIOCustom.defaultStartUrl;\n\n    this.subscriptions.push(\n      vscode.workspace.onDidChangeWorkspaceFolders(\n        this.disposePanel.bind(this),\n      ),\n    );\n  }\n\n  async toggle(startUrl = PIOCustom.defaultStartUrl) {\n    const column = vscode.window.activeTextEditor\n      ? vscode.window.activeTextEditor.viewColumn\n      : undefined;\n\n    try {\n      if (this._currentPanel) {\n        if (this._lastStartUrl !== startUrl) {\n          this._currentPanel.webview.html = await this.getWebviewContent(\n            startUrl,\n          );\n        }\n\n        return this._currentPanel.reveal(column);\n      }\n    } catch (err) {\n      console.warn(err);\n    }\n\n    this._currentPanel = await this.newPanel(startUrl);\n  }\n\n  static async shutdownAllServers() {\n    await pioNodeHelpers.custom.shutdownServer();\n    await pioNodeHelpers.custom.shutdownAllServers();\n  }\n\n  disposePanel() {\n    if (!this._currentPanel) {\n      return;\n    }\n\n    this._currentPanel.dispose();\n    this._currentPanel = undefined;\n  }\n\n  onPanelDisposed() {\n    this._currentPanel = undefined;\n  }\n\n  dispose() {\n    pioNodeHelpers.custom.shutdownServer();\n    this.disposePanel();\n    disposeSubscriptions(this.subscriptions);\n  }\n\n  async newPanel(startUrl) {\n    const panel = vscode.window.createWebviewPanel(\n      'pioHome',\n      extension.getEnterpriseSetting('pioHomeTitle', 'Innatera Custom'),\n      vscode.ViewColumn.One,\n      {\n        enableScripts: true,\n        retainContextWhenHidden: true,\n      },\n    );\n\n    this.subscriptions.push(\n      panel.onDidDispose(this.onPanelDisposed.bind(this)),\n    );\n\n    panel.iconPath = vscode.Uri.file(\n      path.join(\n        extension.context.extensionPath,\n        'assets',\n        'images',\n        'platformio-mini-logo.svg',\n      ),\n    );\n    this.panel =  panel;\n    panel.webview.html = this.getLoadingContent();\n\n    try {\n      panel.webview.html = await this.getWebviewContent(startUrl);\n    } catch (err) {\n      if (!err.toString().includes('Webview is disposed')) {\n        notifyError('Start PIO Home Server', err);\n      }\n    }\n\n\n    return panel;\n  }\n\n  getLoadingContent() {\n    const theme = this.getTheme();\n    return `<!DOCTYPE html>\n    <html lang=\"en\">\n    <body style=\"background-color: ${\n      theme === 'light' ? '#FFF' : '#1E1E1E'\n    }\">\n      <div style=\"padding: 15px;\">Loading...</div>\n    </body>\n    </html>`;\n  }\n\n  getTheme() {\n    const workbench = vscode.workspace.getConfiguration('workbench') || {};\n    return (workbench.colorTheme || '').toLowerCase().includes('light')\n      ? 'light'\n      : 'dark';\n  }\n\n  async getWebviewContent(startUrl) {\n    this._lastStartUrl = startUrl;\n    await pioNodeHelpers.custom.ensureServerStarted({\n      port: extension.getConfiguration('pioCustomServerHttpPort'),\n      host: extension.getConfiguration('pioCustomServerHttpHost'),\n      onIDECommand: await this.onIDECommand.bind(this),\n    });\n    const theme = this.getTheme();\n    const iframeId = `pioHomeIFrame-${vscode.env.sessionId}`;\n    const iframeScript = `\n      <script>\n        function execCommand(data) {\n          document.getElementById('${iframeId}').contentWindow.postMessage({'command': 'execCommand', 'data': data}, '*');\n        }\n\n        for (const command of ['copy', 'paste', 'cut']) {\n          document.addEventListener(command, (e) => {\n            execCommand(command);\n          });\n        }\n\n        document.addEventListener('selectstart', (e) => {\n          execCommand('selectAll');\n          e.preventDefault();\n        });\n\n        window.addEventListener('keydown', (e) => {\n          if (e.key === 'z' && e.metaKey) {\n            execCommand(e.shiftKey ? 'redo' : 'undo');\n          }\n        });\n\n        window.addEventListener('message', (e) => {\n          if (e.data.command === 'kbd-event') {\n            window.dispatchEvent(new KeyboardEvent('keydown', e.data.data));\n          }\n        });\n      </script>\n    `;\n\n    return `<!DOCTYPE html>\n      <html lang=\"en\">\n      <head>${IS_OSX ? iframeScript : ''}</head>\n      <body style=\"margin: 0; padding: 0; height: 100%; overflow: hidden; background-color: ${\n        theme === 'light' ? '#FFF' : '#1E1E1E'\n      }\">\n        <iframe id=\"${iframeId}\" src=\"${pioNodeHelpers.custom.getFrontendUrl({\n          start: startUrl,\n          theme,\n          workspace: extension.getEnterpriseSetting('defaultPIOHomeWorkspace'),\n        })}\"\n          width=\"100%\"\n          height=\"100%\"\n          frameborder=\"0\"\n          style=\"border: 0; left: 0; right: 0; bottom: 0; top: 0; position:absolute;\" />\n      </body>\n      </html>\n    `;\n  }\n\n  async onIDECommand(command, params) {\n    switch (command) {\n      case 'get_custom_targets':\n        return this.onGetCustomTargets(params);\n    }\n  }\nasync runTask(targets) {\n    try {\n        for (let target of targets) { \n            target = target.trim();\n            const platformioPath = IS_WINDOWS \n                ? path.join(process.env.USERPROFILE, '.platformio', 'penv', 'Scripts', 'platformio.exe')\n                : path.join(process.env.HOME, '.platformio', 'penv', 'bin', 'platformio');\n\n            const execution = new vscode.ProcessExecution(\n                platformioPath,\n                ['run', '--target', target],\n            );\n\n            const task = new vscode.Task(\n                { type: 'PlatformIO', target },\n                vscode.TaskScope.Workspace,\n                `Run PIO Target: ${target}`,\n                'Custom Tasks',\n                execution\n            );\n\n            const taskExecution = await vscode.tasks.executeTask(task);\n\n            await new Promise((resolve, reject) => {\n                const disposableEnd = vscode.tasks.onDidEndTaskProcess(event => {\n                    if (event.execution === taskExecution) {\n                        console.info(`Task ended with exit code: ${event.exitCode}`);\n                        disposableEnd.dispose();\n                        disposableStart.dispose();\n                        if (event.exitCode === 0) {\n                            resolve();\n                        } else {\n                            reject(new Error(`Task ${task.name} failed with exit code ${event.exitCode}`));\n                        }\n                    }\n                });\n\n                const disposableStart = vscode.tasks.onDidStartTaskProcess(event => {\n                    if (event.execution === taskExecution) {\n                        console.info(`Task started: ${event.execution.task.name}`);\n                    }\n                });\n            });\n        }\n\n    } catch (error) {\n        console.error('Error executing tasks:', error.message);\n    }\n}\n  async onGetCustomTargets(targets) {\n    const splitTargets  = targets.split(',');\n    this.runTask(splitTargets); \n  }\n\n}","/**\n * Copyright (c) 2017-present PlatformIO <contact@platformio.org>\n * All rights reserved.\n *\n * This source code is licensed under the license found in the LICENSE file in\n * the root directory of this source tree.\n */\n\nimport { IS_WINDOWS, STATUS_BAR_PRIORITY_START } from '../constants';\nimport { disposeSubscriptions, listCoreSerialPorts } from '../utils';\nimport { getProjectItemState, updateProjectItemState } from './helpers';\nimport ProjectTasksTreeProvider from './task-tree';\nimport { extension } from '../main';\nimport PIOCustom from '../custom';\nimport path from 'path';\nimport vscode from 'vscode';\n\nexport default class ProjectTaskManager {\n  static PROVIDER_TYPE = 'PlatformIO';\n  static TASKS_VIEW_ID = 'platformio-ide.projectTasks';\n  static AUTO_REFRESH_DELAY = 500; // 0.5 sec\n\n  constructor(projectDir, projectObserver) {\n    this.projectDir = projectDir;\n    this.projectObserver = projectObserver;\n    this.subscriptions = [];\n    this.PIOCustom = new PIOCustom();\n    this._sid = Math.random();\n    this._multienvTaskExplorer = false;\n    this._refreshTimeout = undefined;\n    this._startedTask = undefined;\n    this._tasksToRestore = [];\n    this._sbPortSwitcher = undefined;\n    this._customPort = getProjectItemState(projectDir, 'customPort');\n\n    this.refresh();\n  }\n\n  dispose() {\n    disposeSubscriptions(this.subscriptions);\n  }\n\n  toggleMultiEnvExplorer() {\n    this._multienvTaskExplorer = !this._multienvTaskExplorer;\n    this.refresh({ force: true });\n  }\n\n  requestRefresh() {\n    if (this._refreshTimeout) {\n      clearTimeout(this._refreshTimeout);\n    }\n    this._refreshTimeout = setTimeout(\n      this.refresh.bind(this),\n      ProjectTaskManager.AUTO_REFRESH_DELAY,\n    );\n  }\n\n  async refresh({ force = false } = {}) {\n    this.dispose();\n\n    if (force) {\n      this.projectObserver.resetCache();\n      this._sid = Math.random();\n    }\n    const projectEnvs = (await this.projectObserver.getConfig()).envs();\n    const projectTasks = [];\n    for (const env of projectEnvs) {  \n      projectTasks.push(...((await this.projectObserver.getLoadedEnvTasks(env )) || []));\n    }\n    const taskViewer = vscode.window.createTreeView(ProjectTaskManager.TASKS_VIEW_ID, {\n      treeDataProvider: new ProjectTasksTreeProvider(\n        this._sid,\n        projectEnvs,\n        projectTasks,\n        this.projectObserver.getSelectedEnv(),\n        this._multienvTaskExplorer,\n      ),\n      showCollapseAll: true,\n    });\n    this.subscriptions.push(\n      taskViewer,\n\n      // pre-fetch expanded env tasks\n      taskViewer.onDidExpandElement(async ({ element }) => {\n        if (element.env) {\n          await this.onDidRequestEnvTasks(element.env);\n        }\n      }),\n\n      // register VSCode Task Provider\n      vscode.tasks.registerTaskProvider(ProjectTaskManager.PROVIDER_TYPE, {\n        provideTasks: () => projectTasks.map((task) => this.toVSCodeTask(task)),\n        resolveTask: () => {\n          return undefined;\n        },\n      }),\n\n      vscode.tasks.onDidEndTaskProcess((event) => this.onDidEndTaskProcess(event)),\n    );\n\n    this.registerTaskBasedCommands(projectTasks);\n    this.registerPortSwitcher();\n    vscode.commands.executeCommand('setContext', 'pioProjectTasksReady', true);\n    vscode.commands.executeCommand(\n      'setContext',\n      'pioMultiEnvProject',\n      projectEnvs.length > 1,\n    );\n  }\n\n  async onDidRequestEnvTasks(name) {\n    if (await this.projectObserver.getLoadedEnvTasks(name)) {\n      return;\n    }\n    await this.projectObserver.loadEnvTasks(name);\n    return this.requestRefresh();\n  }\n\n  toVSCodeTask(projectTask) {\n    const envClone = Object.assign({}, process.env);\n    if (process.env.PLATFORMIO_PATH) {\n      envClone.PATH = process.env.PLATFORMIO_PATH;\n      envClone.Path = process.env.PLATFORMIO_PATH;\n    }\n    const vscodeTask = new vscode.Task(\n      {\n        type: ProjectTaskManager.PROVIDER_TYPE,\n        task: projectTask.id,\n      },\n      vscode.workspace.getWorkspaceFolder(vscode.Uri.file(this.projectDir)),\n      projectTask.id,\n      ProjectTaskManager.PROVIDER_TYPE,\n      new vscode.ProcessExecution(\n        IS_WINDOWS ? 'platformio.exe' : 'platformio',\n        projectTask.getCoreArgs({ port: this._customPort }),\n        {\n          cwd: this.projectDir,\n          env: envClone,\n        },\n      ),\n      '$platformio',\n    );\n    vscodeTask.presentationOptions = {\n      panel: vscode.TaskPanelKind.Dedicated,\n    };\n    if (projectTask.isBuild()) {\n      vscodeTask.group = vscode.TaskGroup.Build;\n    } else if (projectTask.isClean()) {\n      vscodeTask.group = vscode.TaskGroup.Clean;\n    } else if (projectTask.isTest()) {\n      vscodeTask.group = vscode.TaskGroup.Test;\n    }\n    return vscodeTask;\n  }\n\n  runTask(task) {\n    this._autoCloseSerialMonitor(task);\n    // use string-based task defination for Win 7 // issue #3481    \n    vscode.commands.executeCommand(\n      'workbench.action.tasks.runTask',\n      `${ProjectTaskManager.PROVIDER_TYPE}: ${task.id}`,\n    );\n  }\n\n  async _autoCloseSerialMonitor(startedTask) {\n    this._startedTask = startedTask;\n    this._tasksToRestore = [];\n    const closeMonitorConds = [\n      extension.getConfiguration('autoCloseSerialMonitor'),\n      ['upload', 'test'].some((arg) =>\n        this.getTaskArgs(this._startedTask).includes(arg),\n      ),\n    ];\n    if (!closeMonitorConds.every((value) => value)) {\n      return;\n    }\n\n    // skip \"native\" dev-platform\n    // const platform = (await this.projectObserver.getConfig()).getEnvPlatform(\n    //   await this.projectObserver.revealActiveEnvironment()\n    // );\n    // if (platform === 'native') {\n    //   return;\n    // }\n\n    vscode.tasks.taskExecutions.forEach((event) => {\n      const isCurrentTask = this.areTasksEqual(this._startedTask, event.task);\n      const skipConds = [\n        // skip non-PlatformIO task\n        event.task.definition.type !== ProjectTaskManager.PROVIDER_TYPE,\n        !this.getTaskArgs(event.task).includes('monitor'),\n        this.isMonitorAndUploadTask(event.task) && !isCurrentTask,\n      ];\n      if (skipConds.some((value) => value)) {\n        return;\n      }\n      // do not restart the same tasks\n      if (!isCurrentTask) {\n        this._tasksToRestore.push(event.task);\n      }\n      event.terminate();\n    });\n  }\n\n  onDidEndTaskProcess(event) {\n    const skipConds = [\n      !this._startedTask,\n      !this.areTasksEqual(this._startedTask, event.execution.task),\n      event.exitCode !== 0,\n      !this._tasksToRestore.length,\n    ];\n    if (skipConds.some((value) => value)) {\n      return;\n    }\n    this._startedTask = undefined;\n    setTimeout(\n      () => {\n        while (this._tasksToRestore.length) {\n          vscode.tasks.executeTask(this._tasksToRestore.pop());\n        }\n      },\n      parseInt(extension.getConfiguration('reopenSerialMonitorDelay')),\n    );\n  }\n\n  getTaskArgs(task) {\n    return task.args || task.execution.args;\n  }\n\n  isMonitorAndUploadTask(task) {\n    const args = this.getTaskArgs(task);\n    return ['--target', 'upload', 'monitor'].every((arg) => args.includes(arg));\n  }\n\n  areTasksEqual(task1, task2) {\n    if (!task1 || !task2) {\n      return task1 === task2;\n    }\n    const args1 = this.getTaskArgs(task1);\n    const args2 = this.getTaskArgs(task2);\n    return (\n      args1.length === args2.length &&\n      args1.every((value, index) => value === args2[index])\n    );\n  }\n\n  registerTaskBasedCommands(tasks) {\n    const _runTask = (name) => {\n      const candidates = tasks.filter(\n        (task) =>\n          task.name === name,\n      );\n      this.runTask(candidates[0]);\n    };\n    this.subscriptions.push(\n      vscode.commands.registerCommand('platformio-ide.build', () => _runTask('BUILD')),\n      vscode.commands.registerCommand('platformio-ide.upload', () =>\n        _runTask('Upload'),\n      ),\n      vscode.commands.registerCommand('platformio-ide.uploadAndMonitor', () =>\n        _runTask('Upload and Monitor'),\n      ),\n      vscode.commands.registerCommand('platformio-ide.clean', () => _runTask('Clean')),\n      vscode.commands.registerCommand('platformio-ide.test', () => _runTask('Test')),\n      vscode.commands.registerCommand('platformio-ide.serialMonitor', () =>\n        _runTask('Monitor'),\n      ),\n      vscode.commands.registerCommand('platformio-ide.custom', (startUrl) =>\n        this.PIOCustom.toggle(startUrl),\n      ),      \n    );\n  }\n\n  registerPortSwitcher() {\n    this._sbPortSwitcher = vscode.window.createStatusBarItem(\n      'pio-port-switcher',\n      vscode.StatusBarAlignment.Left,\n      STATUS_BAR_PRIORITY_START,\n    );\n    this._sbPortSwitcher.name = 'Innatera: Port Switcher';\n    this._sbPortSwitcher.tooltip = 'Set upload/monitor/test port';\n    this._sbPortSwitcher.command = 'platformio-ide.setProjectPort';\n    this.switchPort(this._customPort);\n\n    this.subscriptions.push(\n      this._sbPortSwitcher,\n      vscode.commands.registerCommand('platformio-ide.setProjectPort', () =>\n        this.pickProjectPort(),\n      ),\n    );\n  }\n\n  async pickProjectPort() {\n    const serialPorts = await listCoreSerialPorts();\n    const pickedItem = await vscode.window.showQuickPick(\n      [\n        { label: 'Auto' },\n        ...serialPorts.map((port) => ({\n          label: port.port,\n          description: [port.description, port.hwid]\n            .filter((value) => !!value)\n            .join(' | '),\n        })),\n        { label: 'Custom...' },\n      ],\n      {\n        matchOnDescription: true,\n      },\n    );\n    if (!pickedItem) {\n      return;\n    }\n    if (pickedItem.label === 'Custom...') {\n      const value = await vscode.window.showInputBox({\n        title: 'Enter custom upload/monitor/test port',\n        placeHolder: 'Examples: COM3, /dev/ttyUSB*, 192.168.0.13, /media/disk',\n      });\n      if (!value) {\n        return;\n      }\n      this.switchPort(value.trim());\n    } else {\n      this.switchPort(pickedItem.label !== 'Auto' ? pickedItem.label : undefined);\n    }\n  }\n\n  switchPort(port = undefined) {\n    updateProjectItemState(this.projectDir, 'customPort', port);\n    this._customPort = port;\n    this._sbPortSwitcher.text = `$(plug) ${\n      this._customPort ? path.basename(this._customPort) : 'Auto'\n    }`;\n    this._sbPortSwitcher.show();\n  }\n}\n","/**\n * Copyright (c) 2017-present PlatformIO <contact@platformio.org>\n * All rights reserved.\n *\n * This source code is licensed under the license found in the LICENSE file in\n * the root directory of this source tree.\n */\n\nimport * as pioNodeHelpers from 'Innatera-node-helpers';\nimport { disposeSubscriptions } from '../utils';\nimport { promises as fs } from 'fs';\nimport path from 'path';\nimport vscode from 'vscode';\n\nexport default class ProjectTestManager {\n  constructor(projectDir) {\n    this.projectDir = projectDir;\n    this.controller = vscode.tests.createTestController(\n      'platformio-tests',\n      'PlatformIO Tests',\n    );\n    this.subscriptions = [this.controller];\n\n    this.controller.refreshHandler = this.refreshHandler.bind(this);\n    this.controller.resolveHandler = this.resolveHandler.bind(this);\n    this.controller.createRunProfile(\n      'Run Tests',\n      vscode.TestRunProfileKind.Run,\n      this.runHandler.bind(this),\n      true,\n    );\n  }\n\n  dispose() {\n    disposeSubscriptions(this.subscriptions);\n  }\n\n  async runCoreTestCommand(args) {\n    const jsonOutputPath = path.join(\n      pioNodeHelpers.core.getTmpDir(),\n      `test-list-${Math.round(Math.random() * 100000)}.json`,\n    );\n    let output = undefined;\n    let error = new Error();\n    try {\n      const envClone = Object.assign({}, process.env);\n      envClone['PLATFORMIO_FORCE_ANSI'] = 'true';\n      output = await pioNodeHelpers.core.getPIOCommandOutput(\n        ['test', ...args, '--json-output-path', jsonOutputPath],\n        {\n          projectDir: this.projectDir,\n          runInQueue: true,\n          spawnOptions: {\n            env: envClone,\n          },\n        },\n      );\n    } catch (err) {\n      error = err;\n    }\n    try {\n      await fs.access(jsonOutputPath);\n    } catch (err) {\n      throw error;\n    }\n\n    const data = await pioNodeHelpers.misc.loadJSON(jsonOutputPath);\n    await fs.unlink(jsonOutputPath); // cleanup\n    return [data, output || error.toString()];\n  }\n\n  async refreshHandler() {\n    this.controller.items.replace([]); // clear\n    await this.resolveTestSuites();\n  }\n\n  async resolveHandler(test) {\n    if (test) {\n      console.warn('Not Implemented');\n      return;\n    }\n    await this.resolveTestSuites();\n  }\n\n  async resolveTestSuites() {\n    try {\n      const [data] = await this.runCoreTestCommand(['--list-tests']);\n      const envToSuites = data.test_suites.reduce(\n        (result, item) =>\n          result.set(item.env_name, [...(result.get(item.env_name) || []), item]),\n        new Map(),\n      );\n      envToSuites.forEach((suites, envName) => {\n        const envSuite = this.controller.createTestItem(`env:${envName}`, envName);\n        envSuite.children.replace(\n          suites.map((suite) =>\n            this.controller.createTestItem(\n              `suite:${envName}/${suite.test_name}`,\n              suite.test_name,\n              suite.test_dir ? vscode.Uri.file(suite.test_dir) : undefined,\n            ),\n          ),\n        );\n        this.controller.items.add(envSuite);\n      });\n    } catch (err) {\n      console.error(err);\n      const item = this.controller.createTestItem(\n        'error',\n        'Error (expand for details)',\n      );\n      item.error = err.toString();\n      this.controller.items.add(item);\n    }\n  }\n\n  extractTestSuites(test) {\n    if (test.id.startsWith('suite:')) {\n      return [test];\n    } else if (test.id.startsWith('case:')) {\n      return [test.parent];\n    } else if (test.id.startsWith('env:')) {\n      return test.children;\n    }\n    return [];\n  }\n\n  async runHandler(request, token) {\n    const run = this.controller.createTestRun(request);\n    const queue = [];\n    const exclude = [];\n\n    if (request.include) {\n      request.include.forEach((test) =>\n        this.extractTestSuites(test).forEach((suite) =>\n          queue.includes(suite) ? undefined : queue.push(suite),\n        ),\n      );\n    } else {\n      this.controller.items.forEach((item) =>\n        item.children.forEach((suite) => queue.push(suite)),\n      );\n    }\n    if (request.exclude) {\n      request.exclude.forEach((test) =>\n        this.extractTestSuites(test).forEach((suite) => exclude.push(suite)),\n      );\n    }\n\n    while (queue.length > 0 && !token.isCancellationRequested) {\n      const suite = queue.pop();\n      if (exclude.includes(suite)) {\n        run.skipped(suite);\n        continue;\n      }\n      await this._runTestSuite(run, suite);\n    }\n    run.end();\n  }\n\n  async _runTestSuite(run, suite) {\n    const envName = suite.parent.label;\n    const testName = suite.label;\n    const startedAt = Date.now();\n    run.started(suite);\n    try {\n      const [data, output] = await this.runCoreTestCommand([\n        '--environment',\n        envName,\n        '--filter',\n        testName,\n      ]);\n      process.chdir(data.project_dir);\n      const result = data.test_suites.find(\n        (item) => item.env_name === envName && item.test_name === testName,\n      );\n\n      switch (result.status) {\n        case 'SKIPPED':\n          run.skipped(suite);\n          break;\n\n        case 'ERRORED':\n          run.failed(\n            suite,\n            new vscode.TestMessage(result.test_cases[0].exception),\n            Date.now() - startedAt,\n          );\n          break;\n\n        default:\n          this._processTestSuiteResult(run, suite, result, startedAt);\n          break;\n      }\n\n      run.appendOutput(output, undefined, suite);\n    } catch (err) {\n      run.appendOutput(err.toString(), undefined, suite);\n      run.failed(suite, new vscode.TestMessage(err.toString()), Date.now() - startedAt);\n    }\n  }\n\n  async _processTestSuiteResult(run, suite, result, startedAt) {\n    const envName = suite.parent.label;\n    const testName = suite.label;\n    suite.children.replace([]);\n    result.test_cases.forEach((testCase) => {\n      const test = this.controller.createTestItem(\n        `case:${envName}/${testName}/${testCase.name}`,\n        testCase.name,\n        testCase.source\n          ? vscode.Uri.file(path.resolve(testCase.source.file))\n          : undefined,\n      );\n      if (testCase.source && testCase.source.line) {\n        test.range = new vscode.Range(\n          testCase.source.line - 1,\n          0,\n          testCase.source.line - 1,\n          0,\n        );\n      }\n      suite.children.add(test);\n\n      switch (testCase.status) {\n        case 'SKIPPED':\n          run.skipped(test);\n          break;\n        case 'ERRORED':\n          run.failed(\n            test,\n            new vscode.TestMessage(testCase.exception),\n            Date.now() - startedAt,\n          );\n          break;\n        case 'FAILED':\n          run.failed(\n            test,\n            new vscode.TestMessage(testCase.message),\n            Date.now() - startedAt,\n          );\n          break;\n        default:\n          run.passed(test, Date.now() - startedAt);\n          break;\n      }\n\n      if (testCase.stdout) {\n        run.appendOutput(\n          testCase.stdout,\n          test.uri ? new vscode.Location(test.uri, test.range) : undefined,\n          test,\n        );\n      }\n    });\n  }\n}\n","/**\n * Copyright (c) 2017-present PlatformIO <contact@platformio.org>\n * All rights reserved.\n *\n * This source code is licensed under the license found in the LICENSE file in\n * the root directory of this source tree.\n */\n\nimport * as pioNodeHelpers from 'Innatera-node-helpers';\nimport * as projectHelpers from './helpers';\n\nimport { disposeSubscriptions, notifyError } from '../utils';\nimport { ProjectConfigLanguageProvider } from './config';\nimport ProjectTaskManager from './tasks';\nimport ProjectTestManager from './tests';\nimport { STATUS_BAR_PRIORITY_START } from '../constants';\nimport { extension } from '../main';\nimport path from 'path';\nimport vscode from 'vscode';\nimport { isTalamoProject  } from './helpers';\n\nexport default class ProjectManager {\n  CONFIG_CHANGED_DELAY = 3; // seconds\n\n  constructor() {\n    this._taskManager = undefined;\n    this._sbEnvSwitcher = undefined;\n    this._logOutputChannel = vscode.window.createOutputChannel(\n      'Innatera: Project Configuration',\n    );\n    this._configProvider = new ProjectConfigLanguageProvider();\n    this._configChangedTimeout = undefined;\n\n    this._pool = new pioNodeHelpers.project.ProjectPool({\n      ide: 'vscode',\n      api: {\n        logOutputChannel: this._logOutputChannel,\n        createFileSystemWatcher: vscode.workspace.createFileSystemWatcher,\n        createDirSystemWatcher: (dir) =>\n          vscode.workspace.createFileSystemWatcher(path.join(dir, '*')),\n        withIndexRebuildingProgress: (task) =>\n          vscode.window.withProgress(\n            {\n              location: { viewId: vscode.ProgressLocation.Notification },\n              title: 'Innatera: Configuring project',\n              cancellable: true,\n            },\n            async (progress, token) =>\n              await task(\n                (message, increment = undefined) =>\n                  progress.report({\n                    message,\n                    increment: increment,\n                  }),\n                token,\n              ),\n          ),\n        withTasksLoadingProgress: (task) =>\n          vscode.window.withProgress(\n            {\n              location: { viewId: ProjectTaskManager.TASKS_VIEW_ID },\n            },\n            async () =>\n              await vscode.window.withProgress(\n                {\n                  location: { viewId: vscode.ProgressLocation.Window },\n                  title: 'PlatformIO: Loading tasks...',\n                },\n                task,\n              ),\n          ),\n        onDidChangeProjectConfig: (configPath) => {\n          const projectDir = path.dirname(configPath);\n          if (this._configChangedTimeout) {\n            clearTimeout(this._configChangedTimeout);\n            this._configChangedTimeout = undefined;\n          }\n          this._configChangedTimeout = setTimeout(\n            () =>\n              this.switchToProject(projectDir, {\n                force: true,\n              }),\n            ProjectManager.CONFIG_CHANGED_DELAY * 1000,\n          );\n        },\n        onDidNotifyError: notifyError.bind(this),\n      },\n      settings: {\n        autoPreloadEnvTasks: extension.getConfiguration('autoPreloadEnvTasks'),\n        autoRebuild: extension.getConfiguration('autoRebuildAutocompleteIndex'),\n      },\n    });\n\n    this.subscriptions = [\n      this._pool,\n      this._logOutputChannel,\n      this._configProvider,\n      vscode.window.onDidChangeActiveTextEditor(() => {\n        if (!extension.getConfiguration('activateProjectOnTextEditorChange')) {\n          return;\n        }\n        const projectDir = projectHelpers.getActiveEditorProjectDir();\n        if (projectDir) {\n          this.switchToProject(projectDir);\n        }\n      }),\n      vscode.workspace.onDidChangeWorkspaceFolders(() =>\n        this.switchToProject(this.findActiveProjectDir()),\n      ),\n      vscode.commands.registerCommand('platformio-ide.rebuildProjectIndex', () =>\n        this._pool.getActiveObserver().rebuildIndex({ force: true }),\n      ),\n      vscode.commands.registerCommand('platformio-ide.refreshProjectTasks', () =>\n        this._taskManager.refresh({ force: true }),\n      ),\n      vscode.commands.registerCommand('platformio-ide.toggleMultiEnvProjectTasks', () =>\n        this._taskManager.toggleMultiEnvExplorer(),\n      ),\n      vscode.commands.registerCommand('platformio-ide._runProjectTask', (task) =>\n        this._taskManager.runTask(task),\n      ),\n      vscode.commands.registerCommand(\n        'platformio-ide.activeEnvironment',\n        async () => await this._pool.getActiveObserver().revealActiveEnvironment(),\n      ),\n    ];\n    this.internalSubscriptions = [];\n\n    this.registerEnvSwitcher();\n    // switch to the first project in a workspace on start-up\n    this.switchToProject(this.findActiveProjectDir(), { force: true });\n  }\n\n  dispose() {\n    this.disposeInternals();\n    disposeSubscriptions(this.internalSubscriptions);\n    disposeSubscriptions(this.subscriptions);\n  }\n\n  findActiveProjectDir() {\n    let projectDir = undefined;\n    if (extension.getConfiguration('activateProjectOnTextEditorChange')) {\n      projectDir = projectHelpers.getActiveEditorProjectDir();\n    }\n    return projectDir || this.getSelectedProjectDir();\n  }\n\n  getSelectedProjectDir() {\n    const pioProjectDirs = projectHelpers.getPIOProjectDirs();\n    const currentActiveDir = this._pool.getActiveProjectDir();\n    if (pioProjectDirs.length < 1) {\n      return undefined;\n    }\n    if (\n      currentActiveDir &&\n      pioProjectDirs.find((projectDir) => projectDir === currentActiveDir)\n    ) {\n      return currentActiveDir;\n    }\n    const lastActiveDir = projectHelpers.getLastProjectDir();\n    if (\n      lastActiveDir &&\n      pioProjectDirs.find((projectDir) => projectDir === lastActiveDir)\n    ) {\n      return lastActiveDir;\n    }\n    return pioProjectDirs[0];\n  }\n\n  saveActiveProjectState() {\n    const observer = this._pool.getActiveObserver();\n    if (!observer) {\n      return;\n    }\n    projectHelpers.updateProjectItemState(\n      observer.projectDir,\n      'selectedEnv',\n      observer.getSelectedEnv(),\n    );\n  }\n\n  async switchToProject(projectDir, options = {}) {\n    if (!projectDir) {\n      console.error('switchProject => Please provide project folder');\n      return;\n    }\n    this._sbEnvSwitcher.text = '$(root-folder) Loading...';\n\n    let currentProjectDir = undefined;\n    let currentEnv = undefined;\n    if (this._pool.getActiveObserver()) {\n      currentProjectDir = this._pool.getActiveObserver().projectDir;\n      currentEnv = this._pool.getActiveObserver().getSelectedEnv();\n    }\n    const observer = this._pool.getObserver(projectDir);\n\n    // validate configuration file\n    const configUri = vscode.Uri.file(path.join(projectDir, 'platformio.ini'));\n    try {\n      const isConfigValid = await this._configProvider.lintConfig(configUri);\n      if (!isConfigValid) {\n        vscode.window.showErrorMessage(\n          'The project configuration process has encountered an error due to ' +\n            \"a problem with the 'platformio.ini' file. \" +\n            'Please review the file and fix the issues.',\n        );\n        vscode.window.showTextDocument(configUri);\n        return;\n      }\n    } catch (err) {\n      console.error(err);\n    }\n\n    if ('env' in options) {\n      await observer.switchProjectEnv(options.env);\n    } else if (!observer.getSelectedEnv()) {\n      await observer.switchProjectEnv(\n        projectHelpers.getProjectItemState(projectDir, 'selectedEnv'),\n      );\n    }\n\n    // ignore active project and & env\n    if (\n      options.force ||\n      !currentProjectDir ||\n      currentProjectDir !== projectDir ||\n      currentEnv !== observer.getSelectedEnv()\n    ) {\n      disposeSubscriptions(this.internalSubscriptions);\n      await this._pool.switch(projectDir);\n      this._taskManager = new ProjectTaskManager(projectDir, observer);\n      this.internalSubscriptions.push(\n        this._taskManager,\n        new ProjectTestManager(projectDir),\n      );\n\n      // open \"platformio.ini\" if no visible editors\n      if (\n        vscode.window.visibleTextEditors.length === 0 &&\n        extension.getConfiguration('autoOpenPlatformIOIniFile')\n      ) {\n        vscode.window.showTextDocument(\n          vscode.Uri.file(path.join(projectDir, 'platformio.ini')),\n        );\n      }\n    }\n\n    vscode.commands.executeCommand('setContext', 'isTalamoProject',isTalamoProject(projectDir));\n    this.showSelectedEnv();\n    this.saveActiveProjectState();\n  }\n\n  registerEnvSwitcher() {\n    this._sbEnvSwitcher = vscode.window.createStatusBarItem(\n      'pio-env-switcher',\n      vscode.StatusBarAlignment.Left,\n      STATUS_BAR_PRIORITY_START,\n    );\n    this._sbEnvSwitcher.name = 'Innatera: Project Environment Switcher';\n    this._sbEnvSwitcher.tooltip = 'Switch  Project Environment';\n    this._sbEnvSwitcher.command = 'platformio-ide.pickProjectEnv';\n    this._sbEnvSwitcher.text = '$(root-folder) Loading...';\n    this._sbEnvSwitcher.show();\n\n    this.subscriptions.push(\n      this._sbEnvSwitcher,\n      vscode.commands.registerCommand('platformio-ide.pickProjectEnv', () =>\n        this.pickProjectEnv(),\n      ),\n    );\n  }\n\n  showSelectedEnv() {\n    const observer = this._pool.getActiveObserver();\n    if (!observer) {\n      return;\n    }\n    const env = observer.getSelectedEnv()\n      ? `env:${observer.getSelectedEnv()}`\n      : 'Default';\n    this._sbEnvSwitcher.text = `$(root-folder) ${env} (${path.basename(\n      observer.projectDir,\n    )})`;\n  }\n\n  async pickProjectEnv() {\n    const items = [];\n    for (const projectDir of projectHelpers.getPIOProjectDirs()) {\n      const observer = this._pool.getObserver(projectDir);\n      const envs = (await observer.getConfig()).envs();\n      if (!envs || !envs.length) {\n        continue;\n      }\n      const shortProjectDir = `${path.basename(\n        path.dirname(projectDir),\n      )}/${path.basename(projectDir)}`;\n      items.push({\n        projectDir,\n        label: 'Default',\n        description: `$(folder) ${shortProjectDir} (\"default_envs\" from \"platformio.ini\")`,\n      });\n      items.push(\n        ...envs.map((env) => ({\n          projectDir,\n          env,\n          label: `env:${env}`,\n          description: `$(folder) ${shortProjectDir}`,\n        })),\n      );\n    }\n    const pickedItem = await vscode.window.showQuickPick(items, {\n      matchOnDescription: true,\n    });\n    if (!pickedItem) {\n      return;\n    }\n    this.switchToProject(pickedItem.projectDir, { env: pickedItem.env, force: true });\n  }\n}\n","/**\n * Copyright (c) 2017-present PlatformIO <contact@platformio.org>\n * All rights reserved.\n *\n * This source code is licensed under the license found in the LICENSE file in\n * the root directory of this source tree.\n */\n\nimport * as vscode from 'vscode';\n\nclass QuickItem extends vscode.TreeItem {\n  constructor(label, command, args, collapsibleState, children) {\n    super(label, collapsibleState);\n    if (command) {\n      this.command = {\n        title: label,\n        command,\n        arguments: args,\n      };\n    }\n    this.customChildren = children;\n  }\n}\n\nexport default class QuickAccessTreeProvider {\n  getChildren(element) {\n    if (element && element.customChildren) {\n      return element.customChildren;\n    }\n    return [\n      new QuickItem(\n        'Innatera Home',\n        undefined,\n        undefined,\n        vscode.TreeItemCollapsibleState.Expanded,\n        [\n          new QuickItem('Open', 'platformio-ide.showHome'),\n          new QuickItem('Innatera Account', 'platformio-ide.showHome', ['/account']),\n          new QuickItem('Inspect', 'platformio-ide.showHome', ['/inspect']),\n          new QuickItem('Projects & Configuration', 'platformio-ide.showHome', [\n            '/projects',\n          ]),\n          new QuickItem('Libraries', 'platformio-ide.showHome', ['/libraries']),\n          new QuickItem('Boards', 'platformio-ide.showHome', ['/boards']),\n          new QuickItem('Platforms', 'platformio-ide.showHome', ['/platforms']),\n          new QuickItem('Devices', 'platformio-ide.showHome', ['/device']),\n        ],\n      ),\n      new QuickItem(\n        'Debug',\n        undefined,\n        undefined,\n        vscode.TreeItemCollapsibleState.Expanded,\n        [\n          new QuickItem('Start Debugging', 'platformio-ide.startDebugging'),\n          new QuickItem('Toggle Debug Console', 'workbench.debug.action.toggleRepl'),\n        ],\n      ),\n      new QuickItem(\n        'Miscellaneous',\n        undefined,\n        undefined,\n        vscode.TreeItemCollapsibleState.Expanded,\n        [\n          new QuickItem(\n            'Serial & UDP Plotter',\n            'workbench.extensions.action.showExtensionsWithIds',\n            [['alexnesnes.teleplot']],\n          ),\n          new QuickItem('Innatera Core CLI', 'platformio-ide.openPIOCoreCLI'),\n          new QuickItem('Clone Git Project', 'git.clone'),\n          new QuickItem('New Terminal', 'platformio-ide.newTerminal'),\n          new QuickItem('Upgrade Innatera Core', 'platformio-ide.upgradeCore'),\n          new QuickItem('Show Release Notes', 'platformio-ide.showReleaseNotes'),\n        ],\n      ),\n    ];\n  }\n\n  getTreeItem(element) {\n    return element;\n  }\n}\n","/**\n * Copyright (c) 2017-present PlatformIO <contact@platformio.org>\n * All rights reserved.\n *\n * This source code is licensed under the license found in the LICENSE file in\n * the root directory of this source tree.\n */\n\nimport * as misc from './misc';\nimport * as pioNodeHelpers from 'Innatera-node-helpers';\nimport * as piodebug from 'platformio-vscode-debug';\nimport * as utils from './utils';\n\nimport InstallationManager from './installer/manager';\nimport PIOHome from './home';\nimport PIOReleaseNotes from './release-notes';\nimport PIOTerminal from './terminal';\nimport PIOToolbar from './toolbar';\nimport ProjectManager from './project/manager';\nimport QuickAccessTreeProvider from './views/quick-access-tree';\nimport fs from 'fs-plus';\nimport { getPIOProjectDirs } from './project/helpers';\nimport vscode from 'vscode';\n\nclass PlatformIOVSCodeExtension {\n  constructor() {\n    this.context = undefined;\n    this.pioTerm = undefined;\n    this.pioHome = undefined;\n    this.projectManager = undefined;\n    this.subscriptions = [];\n\n    this._enterpriseSettings = undefined;\n  }\n\n  async activate(context) {\n    this.context = context;\n    this.pioHome = new PIOHome();\n    this.pioTerm = new PIOTerminal();\n    this.subscriptions.push(this.pioHome, this.pioTerm, new PIOReleaseNotes());\n    const hasPIOProject = getPIOProjectDirs().length > 0;\n\n    // dump global state\n    console.info(\n      'PlatformIO IDE Global State',\n      context.globalState.keys().reduce((state, key) => {\n        state[key] = context.globalState.get(key);\n        return state;\n      }, {}),\n    );\n\n    // temporary workaround for https://github.com/Microsoft/vscode/issues/58348\n    if (\n      !vscode.workspace\n        .getConfiguration('extensions')\n        .has('showRecommendationsOnlyOnDemand')\n    ) {\n      vscode.workspace\n        .getConfiguration('extensions')\n        .update('showRecommendationsOnlyOnDemand', true);\n    }\n\n    this.patchOSEnviron();\n    await this.startInstaller(!hasPIOProject);\n    this.subscriptions.push(this.handleUseDevelopmentPIOCoreConfiguration());\n\n    vscode.commands.executeCommand('setContext', 'pioCoreReady', true);\n    if (typeof this.getEnterpriseSetting('onPIOCoreReady') === 'function') {\n      await this.getEnterpriseSetting('onPIOCoreReady')();\n    }\n\n    this.subscriptions.push(\n      vscode.window.registerTreeDataProvider(\n        'platformio-ide.quickAccess',\n        new QuickAccessTreeProvider(),\n      ),\n    );\n\n    this.registerGlobalCommands();\n\n    if (!hasPIOProject) {\n      this.subscriptions.push(\n        new PIOToolbar({ filterCommands: ['platformio-ide.showHome'] }),\n      );\n      return;\n    }\n\n    vscode.commands.executeCommand('setContext', 'pioProjectReady', true);\n    this.subscriptions.push(\n      new PIOToolbar({\n        ignoreCommands: this.getEnterpriseSetting('ignoreToolbarCommands'),\n      }),\n    );\n\n    this.initDebug();\n    this.projectManager = new ProjectManager();\n    this.subscriptions.push(this.projectManager);\n\n    this.startPIOHome();\n\n    misc.maybeRateExtension();\n    misc.warnAboutConflictedExtensions();\n    this.subscriptions.push(\n      vscode.window.onDidChangeActiveTextEditor((editor) =>\n        misc.warnAboutInoFile(editor),\n      ),\n    );\n  }\n\n  getConfiguration(id) {\n    return vscode.workspace.getConfiguration('platformio-ide').get(id);\n  }\n\n loadEnterpriseSettings() {\n    const ext = vscode.extensions.all.find(\n      (item) =>\n        item.id.startsWith('platformio.') &&\n        item.id !== 'platformio.platformio-ide' &&\n        item.isActive,\n    );\n    return ext && ext.exports ? ext.exports.settings : undefined;\n  }\n  \n  \n\n  getEnterpriseSetting(id, defaultValue = undefined) {\n    if (!this._enterpriseSettings) {\n      this._enterpriseSettings = this.loadEnterpriseSettings();\n    } \n    if (this._enterpriseSettings && id in this._enterpriseSettings) {\n      return this._enterpriseSettings[id];\n    }\n    return defaultValue;\n  }\n\n  patchOSEnviron() {\n    const extraVars = {\n      PLATFORMIO_IDE: utils.getIDEVersion(),\n    };\n    // handle HTTP proxy settings\n    const http_proxy = vscode.workspace.getConfiguration('http').get('proxy');\n    if (http_proxy && !process.env.HTTP_PROXY && !process.env.http_proxy) {\n      extraVars['HTTP_PROXY'] = http_proxy;\n    }\n    if (http_proxy && !process.env.HTTPS_PROXY && !process.env.https_proxy) {\n      extraVars['HTTPS_PROXY'] = http_proxy;\n    }\n    if (!vscode.workspace.getConfiguration('http').get('proxyStrictSSL')) {\n      extraVars['PLATFORMIO_SETTING_ENABLE_PROXY_STRICT_SSL'] = 'false';\n    }\n    if (this.getConfiguration('customPyPiIndexUrl')) {\n      extraVars['PIP_INDEX_URL'] = this.getConfiguration('customPyPiIndexUrl');\n    }\n    pioNodeHelpers.proc.patchOSEnviron({\n      caller: 'vscode',\n      extraPath: this.getConfiguration('customPATH'),\n      extraVars,\n    });\n  }\n\n  async startInstaller(disableAutoUpdates) {\n    const im = new InstallationManager(disableAutoUpdates);\n    if (im.locked()) {\n      vscode.window.showInformationMessage(\n        'Innatera IDE installation has been suspended, because Innatera ' +\n          'IDE Installer is already started in another window.',\n      );\n      return;\n    }\n    const doInstall = await vscode.window.withProgress(\n      {\n        location: vscode.ProgressLocation.Window,\n        title: 'Innatera',\n      },\n      async (progress) => {\n        progress.report({\n          message: 'Initializing Innatera Core...',\n        });\n        try {\n          return !(await im.check());\n        } catch (err) {}\n        return true;\n      },\n    );\n\n    if (!doInstall) {\n      return;\n    }\n\n    return await vscode.window.withProgress(\n      {\n        location: vscode.ProgressLocation.Notification,\n        title: 'Innatera Installer',\n      },\n      async (progress) => {\n        progress.report({\n          message: 'Installing Innatera IDE...',\n        });\n        const outputChannel = vscode.window.createOutputChannel(\n          'Innatera Installation',\n        );\n        outputChannel.show();\n        outputChannel.appendLine('Installing Innatera IDE...');\n        outputChannel.appendLine(\n          'It may take a few minutes depending on your connection speed',\n        );\n        outputChannel.appendLine(\n          'Please do not close this window and do not ' +\n            'open other folders until this process is completed.',\n        );\n        outputChannel.appendLine(\n          '\\nDebugging information is available via VSCode > Help > Toggle Developer Tools > Console.',\n        );\n\n        try {\n          im.lock();\n          await im.install(progress);\n          outputChannel.appendLine('Innatera IDE installed successfully.\\n');\n          outputChannel.appendLine('Please restart VSCode.');\n          const action = 'Reload Now';\n          const selected = await vscode.window.showInformationMessage(\n            'Innatera IDE has been successfully installed! Please reload window',\n            action,\n          );\n          if (selected === action) {\n            vscode.commands.executeCommand('workbench.action.reloadWindow');\n          }\n        } catch (err) {\n          outputChannel.appendLine('Failed to install Innatera IDE.');\n          utils.notifyError('Installation Manager', err);\n        } finally {\n          im.unlock();\n        }\n\n        im.destroy();\n        return true;\n      },\n    );\n  }\n\n  async startPIOHome() {\n    if (\n      this.getConfiguration('disablePIOHomeStartup') ||\n      !pioNodeHelpers.home.showAtStartup('vscode')\n    ) {\n      return;\n    }\n    vscode.commands.executeCommand('platformio-ide.showHome');\n  }\n\n  registerGlobalCommands() {\n    this.subscriptions.push(\n      vscode.commands.registerCommand('platformio-ide.showHome', (startUrl) =>\n        this.pioHome.toggle(startUrl),\n      ),\n      vscode.commands.registerCommand('platformio-ide.newTerminal', () =>\n        this.pioTerm.new().show(),\n      ),\n      vscode.commands.registerCommand('platformio-ide.openPIOCoreCLI', () =>\n        this.pioTerm.sendText('pio --help'),\n      ),\n      vscode.commands.registerCommand('platformio-ide.runPIOCoreCommand', (cmd) =>\n        this.pioTerm.sendText(cmd),\n      ),\n      vscode.commands.registerCommand('platformio-ide.startDebugging', () => {\n        vscode.commands.executeCommand('workbench.view.debug');\n        vscode.commands.executeCommand('workbench.debug.action.toggleRepl');\n        vscode.commands.executeCommand('workbench.action.debug.start');\n      }),\n      vscode.commands.registerCommand('platformio-ide.upgradeCore', () =>\n        this.pioTerm.sendText('pio upgrade'),\n      ),\n    );\n  }\n\n  initDebug() {\n    piodebug.activate(this.context);\n  }\n\n  handleUseDevelopmentPIOCoreConfiguration() {\n    return vscode.workspace.onDidChangeConfiguration(async (e) => {\n      if (\n        !e.affectsConfiguration('platformio-ide.useDevelopmentPIOCore') ||\n        !this.getConfiguration('useBuiltinPIOCore')\n      ) {\n        return;\n      }\n      const envDir = pioNodeHelpers.core.getEnvDir();\n      if (!envDir || !fs.isDirectorySync(envDir)) {\n        return;\n      }\n      await PIOHome.shutdownAllServers();\n      await pioNodeHelpers.misc.sleep(2000);\n      try {\n        fs.removeSync(envDir);\n      } catch (err) {\n        console.warn(err);\n      }\n      vscode.window.showInformationMessage(\n        'Please restart VSCode to apply the changes.',\n      );\n    });\n  }\n\n  disposeLocalSubscriptions() {\n    vscode.commands.executeCommand('setContext', 'pioCoreReady', false);\n    vscode.commands.executeCommand('setContext', 'pioProjectReady', false);\n    vscode.commands.executeCommand('setContext', 'isTalamoProject', false);\n    utils.disposeSubscriptions(this.subscriptions);\n  }\n\n  deactivate() {\n    this.disposeLocalSubscriptions();\n  }\n}\n\nexport const extension = new PlatformIOVSCodeExtension();\n\nexport function activate(context) {\n  extension.activate(context);\n  return extension;\n}\n\nexport function deactivate() {\n  extension.deactivate();\n  piodebug.deactivate();\n}\n","/**\n * Copyright (c) 2017-present PlatformIO <contact@platformio.org>\n * All rights reserved.\n *\n * This source code is licensed under the license found in the LICENSE file in\n * the root directory of this source tree.\n */\n\nimport { CONFLICTED_EXTENSION_IDS } from './constants';\nimport { extension } from './main';\nimport vscode from 'vscode';\n\nexport async function maybeRateExtension() {\n  const stateKey = 'rate-extension';\n  const askAfterSessionNums = 13;\n  let state = extension.context.globalState.get(stateKey);\n  if (state && state.done) {\n    return;\n  } else if (!state || !state.callCounter) {\n    state = {\n      callCounter: 0,\n      done: false,\n    };\n  }\n\n  state.callCounter += 1;\n  if (state.callCounter < askAfterSessionNums) {\n    extension.context.globalState.update(stateKey, state);\n    return;\n  }\n\n  const selectedItem = await vscode.window.showInformationMessage(\n    'If you enjoy using Innatera IDE for VSCode, would you mind taking a moment to rate it? ' +\n      'It will not take more than one minute. Thanks for your support!',\n    { title: 'Rate Innatera IDE Extension', isCloseAffordance: false },\n    { title: 'Remind later', isCloseAffordance: false },\n    { title: 'No, Thanks', isCloseAffordance: true },\n  );\n\n  switch (selectedItem ? selectedItem.title : undefined) {\n    case 'Rate Innatera IDE Extension':\n      vscode.commands.executeCommand(\n        'vscode.open',\n        vscode.Uri.parse('http://bit.ly/pio-vscode-rate'),\n      );\n      state.done = true;\n      break;\n    case 'No, Thanks':\n      state.done = true;\n      break;\n    default:\n      state.callCounter = 0;\n  }\n  extension.context.globalState.update(stateKey, state);\n}\n\nexport async function warnAboutConflictedExtensions() {\n  const conflicted = vscode.extensions.all.filter(\n    (ext) => ext.isActive && CONFLICTED_EXTENSION_IDS.includes(ext.id),\n  );\n  if (conflicted.length === 0) {\n    return;\n  }\n  const selectedItem = await vscode.window.showWarningMessage(\n    `Conflicted extensions with IntelliSense service were detected (${conflicted\n      .map((ext) => ext.packageJSON.displayName || ext.id)\n      .join(', ')}). ` +\n      'Code-completion, linting and navigation will not work properly. ' +\n      'Please disable or uninstall them (Menu > View > Extensions).',\n    { title: 'More details', isCloseAffordance: false },\n    { title: 'Uninstall conflicted', isCloseAffordance: false },\n    { title: 'Remind later', isCloseAffordance: true },\n  );\n  switch (selectedItem ? selectedItem.title : undefined) {\n    case 'More details':\n      vscode.commands.executeCommand(\n        'vscode.open',\n        vscode.Uri.parse('http://bit.ly/pio-vscode-conflicted-extensions'),\n      );\n      break;\n    case 'Uninstall conflicted':\n      conflicted.forEach((ext) => {\n        vscode.commands.executeCommand(\n          'workbench.extensions.uninstallExtension',\n          ext.id,\n        );\n      });\n      vscode.commands.executeCommand('workbench.action.reloadWindow');\n      break;\n  }\n}\n\nexport async function warnAboutInoFile(editor) {\n  if (!editor || !editor.document || !editor.document.fileName) {\n    return;\n  }\n  if (!editor.document.fileName.endsWith('.ino')) {\n    return;\n  }\n  const stateKey = 'ino-warn-disabled';\n  if (extension.context.globalState.get(stateKey)) {\n    return;\n  }\n\n  const selectedItem = await vscode.window.showWarningMessage(\n    'C/C++ IntelliSense service does not support .INO files. ' +\n      'It might lead to the spurious problems with code completion, linting, and debugging. ' +\n      'Please convert .INO sketch into the valid .CPP file.',\n    { title: 'Show instruction', isCloseAffordance: false },\n    { title: 'Do not show again', isCloseAffordance: false },\n    { title: 'Remind later', isCloseAffordance: true },\n  );\n  switch (selectedItem ? selectedItem.title : undefined) {\n    case 'Show instruction':\n      vscode.commands.executeCommand(\n        'vscode.open',\n        vscode.Uri.parse('https://bit.ly/convert-ino-to-cpp'),\n      );\n      break;\n    case 'Do not show again':\n      extension.context.globalState.update(stateKey, 1);\n      break;\n  }\n}\n"],"names":["module","exports","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","IS_WINDOWS","process","platform","startsWith","IS_OSX","CONFLICTED_EXTENSION_IDS","disposeSubscriptions","subscriptions","length","pop","dispose","async","notifyError","title","err","description","stack","toString","ghbody","getIDEVersion","reportUrl","getErrorReportUrl","action","includes","showErrorMessage","substring","executeCommand","parse","console","error","getExtension","packageJSON","version","listCoreSerialPorts","output","getCorePythonCommandOutput","JSON","trim","map","item","isPIOProjectSync","projectDir","getPIOProjectDirs","workspaceFolders","folder","uri","fsPath","filter","getActiveEditorProjectDir","editor","activeTextEditor","resource","document","scheme","getWorkspaceFolder","getProjectItemState","extension","context","globalState","updateProjectItemState","projects","keys","update","PIOHome","static","constructor","this","_currentPanel","_lastStartUrl","defaultStartUrl","push","onDidChangeWorkspaceFolders","disposePanel","bind","shutdownAllServers","shutdownServer","onPanelDisposed","toggle","startUrl","column","viewColumn","webview","html","getWebviewContent","reveal","warn","newPanel","panel","createWebviewPanel","getEnterpriseSetting","One","enableScripts","retainContextWhenHidden","onDidDispose","iconPath","file","extensionPath","getLoadingContent","getTheme","getConfiguration","colorTheme","toLowerCase","ensureServerStarted","port","host","onIDECommand","theme","iframeId","sessionId","getFrontendUrl","start","workspace","command","params","onOpenProjectCommand","onOpenTextDocumentCommand","onGetPIOProjectDirs","projectManager","switchToProject","force","updateWorkspaceFolders","showTextDocument","path","gotoPosition","line","selection","revealRange","InCenter","PythonPrompt","STATUS_TRY_AGAIN","STATUS_ABORT","STATUS_CUSTOMEXE","prompt","selectedItem","showInformationMessage","isCloseAffordance","pythonExecutable","result","status","showInputBox","placeHolder","validateInput","InstallationManager","LOCK_TIMEOUT","LOCK_KEY","disableAutoUpdates","config","stages","PlatformIOCoreStage","getValue","setValue","onDidStatusChange","pioCoreVersionSpec","useBuiltinPython","useBuiltinPIOCore","useDevelopmentPIOCore","pythonPrompt","predownloadedPackageDir","locked","lock","Date","getTime","unlock","lockTime","parseInt","check","stage","install","progress","stageIncrementTotal","message","increment","report","destroy","PIOReleaseNotes","registerCommand","stateKey","logoSrc","asWebviewUri","releaseNotes","readReleaseNotes","changelogPath","contents","readFile","encoding","startsAt","indexOf","PIOTerminal","_instance","envClone","assign","env","PLATFORMIO_PATH","PATH","Path","createTerminal","name","sendText","text","exitStatus","new","show","ToolbarButton","tooltip","commands","ToolbarButtonCommands","from","createStatusBarItem","options","priority","Left","PIOToolbar","RUN_BUTTON_COMMANDS_ID","arguments","id","args","rawCommands","Array","isArray","filterCommands","ignoreCommands","getButtons","refresh","buttons","button","some","cmd","forEach","index","sbItem","onDidChangeConfiguration","e","affectsConfiguration","onButtonClick","i","_expandArgVariables","arg","matches","match","replace","ProjectConfigLanguageProvider","language","SCOPE_PLATFORMIO","SCOPE_ENV","diagnosticCollection","createDiagnosticCollection","registerHoverProvider","DOCUMENT_SELECTOR","provideHover","position","registerCompletionItemProvider","provideCompletionItems","token","onDidOpenTextDocument","lintConfig","onDidSaveTextDocument","_optionsCache","Map","_ports","clear","getOptions","configPath","has","set","renderOptionDocs","option","attrs","group","type","multiple","sysenvvar","choices","join","min","max","default","docs","appendCodeblock","appendMarkdown","scope","getScopeAt","getText","split","reverse","getOptionAt","lineNum","lineAt","optionName","find","isOptionValueLocation","sepPos","character","word","getWordRangeAtPosition","providePackageHover","rawValue","exec","pkgOwner","pkgName","pkgUrlParts","encodeURIComponent","qs","URLSearchParams","isInline","isCancellationRequested","provideCompletionValues","provideCompletionOptions","Field","documentation","provideCompletionPorts","provideCompletionBaudrates","provideTypedCompletionValues","values","defaultValue","EnumMember","preselect","createCustomCompletionValueItem","Value","insertText","sortText","setTimeout","items","detail","hwid","String","fromCharCode","errors","warnings","msg","Warning","uriDiagnostics","data","sourceUri","source","diagnostics","lineno","Error","ProjectTasksTreeProvider","envs","tasks","selectedEnv","multiEnvExplorer","multiEnvProject","getEnvTasks","cmpGroup","task","coreEnv","DEFAULT_ENV_NAME","multienv","getTreeItem","taskToTreeItem","treeItem","label","getChildren","element","getEnvChildren","getRootChildren","Collapsed","Expanded","envTasks","getTaskGroups","Folder","candidates","PIOCustom","vscode","onGetCustomTargets","runTask","targets","target","platformioPath","USERPROFILE","HOME","execution","Workspace","taskExecution","executeTask","Promise","resolve","reject","disposableEnd","onDidEndTaskProcess","event","info","exitCode","disposableStart","onDidStartTaskProcess","splitTargets","ProjectTaskManager","projectObserver","_sid","Math","random","_multienvTaskExplorer","_refreshTimeout","_startedTask","_tasksToRestore","_sbPortSwitcher","_customPort","toggleMultiEnvExplorer","requestRefresh","clearTimeout","AUTO_REFRESH_DELAY","resetCache","projectEnvs","getConfig","projectTasks","getLoadedEnvTasks","taskViewer","createTreeView","TASKS_VIEW_ID","treeDataProvider","getSelectedEnv","showCollapseAll","onDidExpandElement","onDidRequestEnvTasks","registerTaskProvider","PROVIDER_TYPE","provideTasks","toVSCodeTask","resolveTask","registerTaskBasedCommands","registerPortSwitcher","loadEnvTasks","projectTask","vscodeTask","getCoreArgs","cwd","presentationOptions","Dedicated","isBuild","Build","isClean","Clean","isTest","Test","_autoCloseSerialMonitor","startedTask","getTaskArgs","every","taskExecutions","isCurrentTask","areTasksEqual","isMonitorAndUploadTask","terminate","task1","task2","args1","args2","_runTask","switchPort","pickProjectPort","serialPorts","pickedItem","showQuickPick","matchOnDescription","ProjectTestManager","controller","createTestController","refreshHandler","resolveHandler","createRunProfile","Run","runHandler","runCoreTestCommand","jsonOutputPath","getTmpDir","round","getPIOCommandOutput","runInQueue","spawnOptions","access","loadJSON","unlink","resolveTestSuites","test","test_suites","reduce","env_name","suites","envName","envSuite","createTestItem","children","suite","test_name","test_dir","add","extractTestSuites","parent","request","run","createTestRun","queue","exclude","include","skipped","_runTestSuite","end","testName","startedAt","now","started","chdir","project_dir","failed","test_cases","exception","_processTestSuiteResult","appendOutput","testCase","range","passed","stdout","ProjectManager","CONFIG_CHANGED_DELAY","_taskManager","_sbEnvSwitcher","_logOutputChannel","createOutputChannel","_configProvider","_configChangedTimeout","_pool","ProjectPool","ide","api","logOutputChannel","createFileSystemWatcher","createDirSystemWatcher","dir","withIndexRebuildingProgress","withProgress","location","viewId","Notification","cancellable","withTasksLoadingProgress","Window","onDidChangeProjectConfig","onDidNotifyError","settings","autoPreloadEnvTasks","autoRebuild","onDidChangeActiveTextEditor","findActiveProjectDir","getActiveObserver","rebuildIndex","revealActiveEnvironment","internalSubscriptions","registerEnvSwitcher","disposeInternals","getSelectedProjectDir","pioProjectDirs","currentActiveDir","getActiveProjectDir","lastActiveDir","saveActiveProjectState","observer","currentProjectDir","currentEnv","getObserver","configUri","switchProjectEnv","switch","visibleTextEditors","frameworkMatch","isTalamoProject","showSelectedEnv","pickProjectEnv","shortProjectDir","QuickItem","collapsibleState","super","customChildren","QuickAccessTreeProvider","pioTerm","pioHome","_enterpriseSettings","activate","hasPIOProject","state","patchOSEnviron","startInstaller","handleUseDevelopmentPIOCoreConfiguration","registerTreeDataProvider","registerGlobalCommands","initDebug","startPIOHome","done","callCounter","conflicted","all","ext","isActive","showWarningMessage","displayName","fileName","endsWith","loadEnterpriseSettings","extraVars","PLATFORMIO_IDE","http_proxy","HTTP_PROXY","HTTPS_PROXY","https_proxy","caller","extraPath","im","outputChannel","appendLine","showAtStartup","envDir","getEnvDir","sleep","disposeLocalSubscriptions","deactivate"],"sourceRoot":""}